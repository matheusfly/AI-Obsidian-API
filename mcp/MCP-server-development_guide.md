### Usuário

write a complete breakdown MCP servers development and write a fully coverage guide on thecnical requirements and best pratices to build most robust advanced capabilities and MCP features, tooling etc with any llms, providers etc .. focused in more modern languages, stacks!

---

### Grok AI

<div class="relative"><div class="thinking-container mb-3"><div class="think-box relative mb-2 @md/mainview:-mx-4 prose-p:!my-0 prose-li:!m-0"><div class="z-10 w-full" style="height: auto; position: relative;"><div class="flex flex-row items-center gap-1 flex-shrink-0 h-7 cursor-pointer mt-3 mb-1 sm:mx-3 w-[calc(100%-40px)]"><div class="w-[24px] h-[24px] flex items-center justify-center relative group"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="stroke-[2] -mt-[1px] text-secondary group-hover:opacity-0 transition-opacity"><path d="M19 9C19 12.866 15.866 17 12 17C8.13398 17 4.99997 12.866 4.99997 9C4.99997 5.13401 8.13398 3 12 3C15.866 3 19 5.13401 19 9Z" class="fill-yellow-100 dark:fill-yellow-300 origin-center transition-[transform,opacity] duration-100 scale-0 opacity-0"></path><path d="M15 16.1378L14.487 15.2794L14 15.5705V16.1378H15ZM8.99997 16.1378H9.99997V15.5705L9.51293 15.2794L8.99997 16.1378ZM18 9C18 11.4496 16.5421 14.0513 14.487 15.2794L15.5129 16.9963C18.1877 15.3979 20 12.1352 20 9H18ZM12 4C13.7598 4 15.2728 4.48657 16.3238 5.33011C17.3509 6.15455 18 7.36618 18 9H20C20 6.76783 19.082 4.97946 17.5757 3.77039C16.0931 2.58044 14.1061 2 12 2V4ZM5.99997 9C5.99997 7.36618 6.64903 6.15455 7.67617 5.33011C8.72714 4.48657 10.2401 4 12 4V2C9.89382 2 7.90681 2.58044 6.42427 3.77039C4.91791 4.97946 3.99997 6.76783 3.99997 9H5.99997ZM9.51293 15.2794C7.4578 14.0513 5.99997 11.4496 5.99997 9H3.99997C3.99997 12.1352 5.81225 15.3979 8.48701 16.9963L9.51293 15.2794ZM9.99997 19.5001V16.1378H7.99997V19.5001H9.99997ZM10.5 20.0001C10.2238 20.0001 9.99997 19.7763 9.99997 19.5001H7.99997C7.99997 20.8808 9.11926 22.0001 10.5 22.0001V20.0001ZM13.5 20.0001H10.5V22.0001H13.5V20.0001ZM14 19.5001C14 19.7763 13.7761 20.0001 13.5 20.0001V22.0001C14.8807 22.0001 16 20.8808 16 19.5001H14ZM14 16.1378V19.5001H16V16.1378H14Z" fill="currentColor"></path><path d="M9 16.0001H15" stroke="currentColor"></path><path d="M12 16V12" stroke="currentColor" stroke-linecap="square"></path><g><path d="M20 7L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M20 9L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 7L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 9L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path></g></svg><div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity" style="transform: none;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down text-secondary"><path d="m6 9 6 6 6-6"></path></svg></div></div><div class="flex-1 overflow-hidden text-secondary"><span class="truncate">Pensou por 21s</span></div></div></div></div></div><div class="relative response-content-markdown markdown [&amp;_a:not(.not-prose)]:text-current [&amp;_a:not(.not-prose):hover]:text-primary [&amp;_a:not(.not-prose):hover]:decoration-primary [&amp;_a:not(.not-prose)]:underline [&amp;_a:not(.not-prose)]:decoration-primary/30 [&amp;_a:not(.not-prose)]:underline-offset-2 [&amp;_h2:not(.not-prose):first-child]:mt-0 [&amp;_h3:not(.not-prose):first-child]:mt-0 [&amp;_h4:not(.not-prose):first-child]:mt-0"><h3 dir="auto" class="text-xl">Key Points on MCP Servers Development</h3>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Model Context Protocol (MCP) Overview</strong>: MCP is an open-source standard that standardizes how large language models (LLMs) like Claude or GPT connect to external tools, data sources, and workflows, acting like a "USB-C for AI" to enable secure, real-time interactions without custom integrations. Research suggests it significantly boosts AI agent capabilities, though adoption varies by provider due to implementation complexities.</li>
<li class="break-words"><strong class="font-semibold">Core Benefits and Capabilities</strong>: It supports tools (executable functions), resources (data access), and prompts (workflow templates), with advanced features like progress tracking and sampling for cost efficiency. Evidence leans toward MCP being essential for robust AI systems, but security risks require careful handling to avoid vulnerabilities in external connections.</li>
<li class="break-words"><strong class="font-semibold">Technical Requirements</strong>: Servers must implement JSON-RPC 2.0 over stdio (for local) or WebSockets/HTTP (for remote), with authentication via API keys or OAuth. Minimum hardware: 8-core CPU, 16-32 GB RAM, NVMe storage for production. Compatible with any LLM provider (e.g., Anthropic, OpenAI) via SDKs.</li>
<li class="break-words"><strong class="font-semibold">Modern Languages and Stacks</strong>: Focus on Python (FastMCP SDK), TypeScript/Node.js, Go, or Rust for high performance and concurrency. Best for scalability in cloud environments like AWS Lambda or Kubernetes.</li>
<li class="break-words"><strong class="font-semibold">Best Practices for Robustness</strong>: Prioritize input validation, rate limiting, and logging; use containerization for deployment. For advanced setups, integrate elicitation for dynamic tool discovery and multi-server chaining to handle complex workflows empathetically across stakeholders like developers and security teams.</li>
</ul>
<h3 dir="auto" class="text-xl">Getting Started with MCP Servers</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">To build an MCP server, start with the official SDKs. Install Python 3.10+ and the MCP SDK via <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">pip install mcp[cli]</span>, or use npm for TypeScript. Define tools as async functions decorated with <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">@mcp.tool()</span>, expose resources via JSON schemas, and run the server with <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">mcp run</span>. Connect to LLMs like Claude Desktop by configuring the host's MCP settings with your server's endpoint (e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">ws://localhost:8765</span>).</p>
<h3 dir="auto" class="text-xl">Technical Requirements Breakdown</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">MCP requires adherence to the June 2025 specification: bidirectional communication via JSON-RPC, supporting methods like <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">list_tools</span>, <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">call_tool</span>, and <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">get_resource</span>. Servers must handle sessions, errors (e.g., via <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">InvalidRequest</span>), and transports (stdio for local dev, HTTP for remote). For LLMs, ensure compatibility with providers' APIs—e.g., Anthropic's Claude supports native MCP, while OpenAI requires wrappers. No absolute guarantees on cross-provider performance, as integration depth varies.</p>
<h3 dir="auto" class="text-xl">Best Practices for Advanced Capabilities</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Implement modularity by separating concerns (e.g., auth in middleware). For robustness, add retries with exponential backoff and monitor with Prometheus. Use modern stacks like Python + FastAPI for rapid prototyping or Go for low-latency production. Test with MCP Inspector tool for validation.</p>
<hr class="border-border-l2">
<h3 dir="auto" class="text-xl">Comprehensive Guide to MCP Servers: Development, Technical Requirements, Best Practices, and Advanced Features</h3>
<h4 dir="auto" class="">Introduction to Model Context Protocol (MCP)</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">The Model Context Protocol (MCP) represents a pivotal advancement in AI infrastructure, emerging as an open-source standard introduced by Anthropic in late 2024 to address the fragmentation in how large language models (LLMs) interact with external ecosystems. At its core, MCP functions as a universal interface—often analogized to USB-C for AI—enabling seamless, standardized connections between LLM-based applications (such as Claude, ChatGPT, or custom agents) and diverse external systems, including databases, APIs, file systems, and specialized tools. This protocol mitigates the "N+1 integration problem," where each new data source or tool demands bespoke code, by providing a consistent API layer that promotes scalability, security, and interoperability.<span class="inline-flex flex-row items-center"></span></p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">In practice, MCP empowers AI agents to perform actions beyond their trained knowledge, such as querying real-time weather data, analyzing enterprise databases, or automating workflows in tools like Notion or Blender. For developers, it reduces boilerplate code and accelerates deployment, while end-users benefit from more context-aware, productive AI interactions. However, as with any emerging standard, MCP's effectiveness depends on robust implementation; poor security or inefficient handling can lead to latency issues or data leaks, underscoring the need for balanced, empathetic design that considers both innovation and risk.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">This guide offers a complete breakdown of MCP server development, from foundational concepts to advanced capabilities. It emphasizes modern languages and stacks (e.g., Python 3.12+, TypeScript with Node.js 20+, Go 1.22+, Rust 1.80+) for building resilient systems compatible with any LLM provider (Anthropic, OpenAI, Grok, Hugging Face, etc.). We'll cover technical requirements, best practices, tooling, and integration strategies, drawing on the latest 2025 specifications and community insights.</p>
<h4 dir="auto" class="">Architecture and Core Components of MCP</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">MCP's architecture is client-server oriented, with the LLM host (client) connecting to one or more MCP servers to discover and invoke capabilities. The protocol is transport-agnostic but defaults to JSON-RPC 2.0 over stdio for local development or WebSockets/HTTP for remote deployments. Key components include:</p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Tools</strong>: Executable functions that the LLM can call, e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">get_weather_forecast(lat, lon)</span>. Defined with schemas for parameters and returns.</li>
<li class="break-words"><strong class="font-semibold">Resources</strong>: Read-only data endpoints, like database schemas or file contents, fetched via <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">get_resource(path)</span>.</li>
<li class="break-words"><strong class="font-semibold">Prompts</strong>: Pre-defined templates for guiding LLM interactions, e.g., "Analyze this SQL query for optimization."</li>
<li class="break-words"><strong class="font-semibold">Roots</strong>: Virtual file systems for organizing resources hierarchically.</li>
<li class="break-words"><strong class="font-semibold">Sampling and Elicitation</strong>: Advanced features for offloading computation to clients or dynamically querying capabilities.</li>
<li class="break-words"><strong class="font-semibold">Transports and Sessions</strong>: Bidirectional streams for real-time updates, with session IDs for state management.</li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">The flow typically involves: (1) Client connects and queries <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">list_capabilities</span>; (2) Server responds with available tools/resources; (3) Client invokes via <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">call_tool</span> or <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">get_resource</span>; (4) Server executes and streams results, including progress notifications.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">For integration with LLMs, MCP is provider-agnostic but shines with native support in Anthropic's Claude (via Desktop app) or OpenAI's Assistants API with adapters. In multi-provider setups, use middleware to normalize requests.</p>









































<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="sm">Component</th><th class="break-words" data-col-size="md">Purpose</th><th class="break-words" data-col-size="lg">Example Use Case</th><th class="break-words" data-col-size="xl">LLM Provider Compatibility</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Tools</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Actionable functions</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Querying APIs (e.g., weather.gov)</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">All (via SDK wrappers)</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Resources</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Data access</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Exposing DB schemas</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">High with vector DBs like Milvus</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Prompts</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Workflow guidance</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Data analysis templates</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Native in Claude, adaptable for Grok</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Sampling</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Client-side generation</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Cost-efficient completions</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Anthropic/OpenAI optimized</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Elicitation</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Dynamic discovery</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Auto-querying server features</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Experimental in most providers</td></tr></tbody></table></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">This table highlights how components map to real-world applications, ensuring comprehensive coverage for robust builds.</p>
<h4 dir="auto" class="">Technical Requirements for Implementing MCP Servers</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Implementing an MCP server demands adherence to the official specification (version 2025-06-18), which outlines mandatory JSON-RPC methods and error codes. Core requirements include:</p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Protocol Compliance</strong>: Support JSON-RPC 2.0 with methods like <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">initialize</span>, <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">list_tools</span>, <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">call_tool</span>, <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">get_resource</span>, <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">list_prompts</span>, and <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">shutdown</span>. Handle batch requests and notifications for efficiency.</li>
<li class="break-words"><strong class="font-semibold">Transport Layer</strong>:
<ul dir="auto" class="marker:text-secondary">
<li class="break-words">Local: Stdio (print JSON to stdout, read from stdin) for dev/testing.</li>
<li class="break-words">Remote: WebSockets (preferred for bidirectional) or HTTP/2 for scalability. Use TLS 1.3 for encryption.</li>
</ul>
</li>
<li class="break-words"><strong class="font-semibold">Authentication and Security</strong>: API keys, OAuth 2.0, or JWT for sessions. Enforce least-privilege access; validate all inputs to prevent injection attacks. Minimum: Rate limiting (e.g., 100 req/min per session).</li>
<li class="break-words"><strong class="font-semibold">Performance Specs</strong>: Response times &lt;500ms for tools; support streaming for long-running tasks. Hardware: Multi-core CPU (8+ cores), 16-32 GB RAM, NVMe SSD for I/O-intensive ops like DB queries.</li>
<li class="break-words"><strong class="font-semibold">Error Handling</strong>: Standardized errors (e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">ParseError</span>, <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">ToolNotFound</span>). Include retries and fallbacks.</li>
<li class="break-words"><strong class="font-semibold">Dependencies</strong>: No internet-required installs; use SDKs for boilerplate. For LLMs, expose capabilities via OpenAPI-like schemas for auto-discovery.</li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">For any LLM provider, wrap calls in async functions to handle token limits and context windows. Testing requires the MCP Inspector (a CLI tool for simulating clients) or integration with Claude Desktop.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">In modern setups, containerize with Docker and orchestrate via Kubernetes for horizontal scaling. Ensure compatibility with serverless (e.g., AWS Lambda via WebSocket gateways).</p>
<h4 dir="auto" class="">Step-by-Step Development Guide: Building a Robust MCP Server</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Drawing from official quickstarts and community tutorials, here's a detailed walkthrough focused on Python (modern stack: FastAPI + httpx for async I/O), adaptable to other languages.</p>
<ol dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Setup Environment</strong>:
<ul dir="auto" class="marker:text-secondary">
<li class="break-words">Install Python 3.12+ and uv (fast package manager): <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">curl -LsSf https://astral.sh/uv/install.sh | sh</span>.</li>
<li class="break-words">Create project: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">uv init mcp-weather-server; cd mcp-weather-server; uv venv; source .venv/bin/activate; uv add "mcp[cli]" httpx fastapi uvicorn</span>.</li>
<li class="break-words">For TypeScript: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">npm init; npm i @mcp/sdk fastify</span>.</li>
</ul>
</li>
<li class="break-words"><strong class="font-semibold">Initialize Server</strong>:
<ul dir="auto" class="marker:text-secondary">
<li class="break-words">In <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">server.py</span> (Python):
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">python</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(230, 230, 230);"> typing </span><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> Any</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> httpx</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(230, 230, 230);"> mcp.server.fastmcp </span><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> FastMCP</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(230, 230, 230);"> fastapi </span><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> FastAPI</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(230, 230, 230);">mcp </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(230, 230, 230);"> FastMCP(</span><span style="color: rgb(206, 145, 120);">"weather-server"</span><span style="color: rgb(230, 230, 230);">)</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">app </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(230, 230, 230);"> FastAPI()  </span><span style="color: rgb(106, 153, 85);"># For remote HTTP/WebSocket</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(230, 230, 230);">NWS_API_BASE </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(206, 145, 120);"> "https://api.weather.gov"</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">USER_AGENT </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(206, 145, 120);"> "mcp-weather/1.0"</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
</li>
<li class="break-words">Implement helpers for external API calls with error handling and timeouts.</li>
</ul>
</li>
<li class="break-words"><strong class="font-semibold">Define Tools and Resources</strong>:
<ul dir="auto" class="marker:text-secondary">
<li class="break-words">Tools (async for non-blocking):
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">python</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(220, 220, 170);">@mcp.tool</span><span style="color: rgb(230, 230, 230);">()</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">async</span><span style="color: rgb(86, 156, 214);"> def</span><span style="color: rgb(220, 220, 170);"> get_alerts</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">state</span><span style="color: rgb(230, 230, 230);">: </span><span style="color: rgb(78, 201, 176);">str</span><span style="color: rgb(230, 230, 230);">) -&gt; </span><span style="color: rgb(78, 201, 176);">str</span><span style="color: rgb(230, 230, 230);">:</span></span>
<span class="line"><span style="color: rgb(206, 145, 120);">    """Get weather alerts for a US state."""</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">    url </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(86, 156, 214);"> f</span><span style="color: rgb(206, 145, 120);">"</span><span style="color: rgb(86, 156, 214);">{</span><span style="color: rgb(230, 230, 230);">NWS_API_BASE</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">/alerts/active/area/</span><span style="color: rgb(86, 156, 214);">{</span><span style="color: rgb(230, 230, 230);">state</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">"</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">    async</span><span style="color: rgb(197, 134, 192);"> with</span><span style="color: rgb(230, 230, 230);"> httpx.AsyncClient(</span><span style="color: rgb(156, 220, 254);">timeout</span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(181, 206, 168);">30.0</span><span style="color: rgb(230, 230, 230);">) </span><span style="color: rgb(197, 134, 192);">as</span><span style="color: rgb(230, 230, 230);"> client:</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">        try</span><span style="color: rgb(230, 230, 230);">:</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">            resp </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(197, 134, 192);"> await</span><span style="color: rgb(230, 230, 230);"> client.get(url, </span><span style="color: rgb(156, 220, 254);">headers</span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(230, 230, 230);">{</span><span style="color: rgb(206, 145, 120);">"User-Agent"</span><span style="color: rgb(230, 230, 230);">: USER_AGENT, </span><span style="color: rgb(206, 145, 120);">"Accept"</span><span style="color: rgb(230, 230, 230);">: </span><span style="color: rgb(206, 145, 120);">"application/geo+json"</span><span style="color: rgb(230, 230, 230);">})</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">            resp.raise_for_status()</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">            data </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(230, 230, 230);"> resp.json()</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">            if</span><span style="color: rgb(86, 156, 214);"> not</span><span style="color: rgb(230, 230, 230);"> data.get(</span><span style="color: rgb(206, 145, 120);">"features"</span><span style="color: rgb(230, 230, 230);">):</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">                return</span><span style="color: rgb(206, 145, 120);"> "No active alerts."</span></span>
<span class="line"><span style="color: rgb(106, 153, 85);">            # Format and return (add validation: e.g., re.match(r'^[A-Z]{2}$', state))</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">            return</span><span style="color: rgb(206, 145, 120);"> "</span><span style="color: rgb(215, 186, 125);">\n</span><span style="color: rgb(206, 145, 120);">"</span><span style="color: rgb(230, 230, 230);">.join([</span><span style="color: rgb(86, 156, 214);">f</span><span style="color: rgb(206, 145, 120);">"Alert: </span><span style="color: rgb(86, 156, 214);">{</span><span style="color: rgb(230, 230, 230);">f[</span><span style="color: rgb(206, 145, 120);">'properties'</span><span style="color: rgb(230, 230, 230);">][</span><span style="color: rgb(206, 145, 120);">'event'</span><span style="color: rgb(230, 230, 230);">]</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">"</span><span style="color: rgb(197, 134, 192);"> for</span><span style="color: rgb(230, 230, 230);"> f </span><span style="color: rgb(197, 134, 192);">in</span><span style="color: rgb(230, 230, 230);"> data[</span><span style="color: rgb(206, 145, 120);">"features"</span><span style="color: rgb(230, 230, 230);">]])</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">        except</span><span style="color: rgb(78, 201, 176);"> Exception</span><span style="color: rgb(197, 134, 192);"> as</span><span style="color: rgb(230, 230, 230);"> e:</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">            return</span><span style="color: rgb(86, 156, 214);"> f</span><span style="color: rgb(206, 145, 120);">"Error: </span><span style="color: rgb(86, 156, 214);">{</span><span style="color: rgb(78, 201, 176);">str</span><span style="color: rgb(230, 230, 230);">(e)</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">"</span><span style="color: rgb(106, 153, 85);">  # Log to structured logger like structlog</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
</li>
<li class="break-words">Resources: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">@mcp.resource(path="forecast/schema")</span> to return JSON schemas.</li>
<li class="break-words">Prompts: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">@mcp.prompt(name="analyze_alerts")</span> with templates.</li>
</ul>
</li>
<li class="break-words"><strong class="font-semibold">Add Authentication and Security</strong>:
<ul dir="auto" class="marker:text-secondary">
<li class="break-words">Use middleware: In FastAPI, add <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">app.add_middleware</span> for API key checks.</li>
<li class="break-words">For OAuth: Integrate <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">authlib</span> and store tokens securely (e.g., in Vault or env vars).</li>
</ul>
</li>
<li class="break-words"><strong class="font-semibold">Run and Deploy</strong>:
<ul dir="auto" class="marker:text-secondary">
<li class="break-words">Local: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">mcp run server.py</span> (stdio mode).</li>
<li class="break-words">Remote: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">uvicorn server:app --ws websockets --host 0.0.0.0 --port 8765</span>.</li>
<li class="break-words">Deploy: Dockerize (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">FROM python:3.12-slim</span>), push to ECR/GCR, deploy on EKS or Vercel. Use NGINX for TLS termination.</li>
</ul>
</li>
<li class="break-words"><strong class="font-semibold">Connect to LLM Host</strong>:
<ul dir="auto" class="marker:text-secondary">
<li class="break-words">In Claude Desktop: Settings &gt; MCP &gt; Add Server (URL: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">ws://localhost:8765</span>).</li>
<li class="break-words">For OpenAI: Use a wrapper like LangChain's MCP adapter.</li>
<li class="break-words">Test: Query "Get alerts for CA" in the LLM chat; verify tool invocation.</li>
</ul>
</li>
</ol>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">For Go/Rust adaptations: Use <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">github.com/modelcontextprotocol/go-sdk</span> for similar decorators; Rust's async with Tokio for concurrency.</p>
<h4 dir="auto" class="">Best Practices for Robust, Advanced MCP Servers</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Building for production requires foresight into scalability, security, and maintainability. Key practices, informed by 2025 community standards:<span class="inline-flex flex-row items-center"></span></p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Security First</strong>: Validate schemas with Pydantic (Python) or Zod (TS); implement RBAC for tools. Avoid exposing sensitive data—use ephemeral sessions. For remote servers, enforce CORS and WSS. Best: Zero-trust model with mTLS.</li>
<li class="break-words"><strong class="font-semibold">Performance Optimization</strong>: Async everywhere; cache resources with Redis. Low-latency stacks: Go for &lt;100ms responses. Monitor with Jaeger for traces.</li>
<li class="break-words"><strong class="font-semibold">Modularity and Maintainability</strong>: Microservices pattern—separate auth, tools, and logging modules. Use CI/CD with GitHub Actions; version capabilities with semantic tags.</li>
<li class="break-words"><strong class="font-semibold">Error Resilience</strong>: Exponential backoff retries (e.g., tenacity lib); structured logging (ELK stack). Handle cancellations via JSON-RPC <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">cancel</span> notifications.</li>
<li class="break-words"><strong class="font-semibold">Scalability</strong>: Stateless design; auto-scale with Kubernetes. For high-traffic, shard sessions by user ID.</li>
<li class="break-words"><strong class="font-semibold">Testing and Debugging</strong>: Unit test tools with pytest; integration via MCP Inspector. Load test with Locust. Dev mode: Watch files for hot-reload.</li>
<li class="break-words"><strong class="font-semibold">LLM Integration Best Practices</strong>: Dynamic tool selection via elicitation; offload sampling to reduce server costs. For multi-LLM: Abstract providers with interfaces (e.g., LiteLLM).</li>
<li class="break-words"><strong class="font-semibold">Deployment Patterns</strong>: Serverless (AWS Lambda + API Gateway for WebSockets); edge computing (Cloudflare Workers). Hybrid local/remote for dev/prod.</li>
</ul>









































<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="md">Best Practice</th><th class="break-words" data-col-size="md">Modern Stack Example</th><th class="break-words" data-col-size="lg">Benefit</th><th class="break-words" data-col-size="xl">Potential Pitfall</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Input Validation</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Pydantic/Zod</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Prevents exploits</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Over-validation slows perf</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Async Processing</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">asyncio/Tokio</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Handles concurrency</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Race conditions if not locked</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Monitoring</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Prometheus + Grafana</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Real-time insights</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Overhead in small setups</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Caching</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Redis/Memcached</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Reduces API calls</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Stale data risks</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Auth</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">OAuth2 + JWT</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Secure access</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Token expiry mishandling</td></tr></tbody></table></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Adopt these to ensure empathy for diverse users, from solo devs to enterprise teams.</p>
<h4 dir="auto" class="">Advanced Capabilities and Features</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">MCP's power lies in its extensibility. Beyond basics, implement:</p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Progress Tracking and Streaming</strong>: Use <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">tool_start</span>, <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">tool_progress</span> notifications for long tasks (e.g., DB queries). Example: Stream partial results in <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">call_tool</span> responses.</li>
<li class="break-words"><strong class="font-semibold">Cancellation and Completions</strong>: Handle <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">cancel_request</span> to abort tools; support <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">complete</span> for final states.</li>
<li class="break-words"><strong class="font-semibold">Sampling</strong>: Offload generation to clients—server requests LLM to sample text, saving tokens. Ideal for cost-sensitive providers like Grok.</li>
<li class="break-words"><strong class="font-semibold">Elicitation</strong>: Dynamic queries like "What tools handle weather?" for adaptive agents.</li>
<li class="break-words"><strong class="font-semibold">Roots and Hierarchical Resources</strong>: Virtual FS for organized access, e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">/db/tables/users</span>.</li>
<li class="break-words"><strong class="font-semibold">Chaining and Multi-Server</strong>: Agents invoke tools that call other MCP servers, enabling workflows like "Query DB → Analyze with LLM → Update CRM."</li>
<li class="break-words"><strong class="font-semibold">Logging and Auditing</strong>: Structured logs with correlation IDs; integrate with Splunk for compliance.</li>
<li class="break-words"><strong class="font-semibold">Advanced Tooling</strong>: Integrate with vector stores (Milvus) for semantic search resources; use WebAssembly for language-agnostic tools.</li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">For enterprise, add session persistence with PostgreSQL and AI-assisted building via LLMs like Claude: Provide MCP docs to the LLM and prompt "Build a secure DB MCP server." This meta-use accelerates development.</p>









































<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="md">Advanced Feature</th><th class="break-words" data-col-size="lg">Implementation Tip</th><th class="break-words" data-col-size="md">LLM Enhancement</th><th class="break-words" data-col-size="lg">Use Case</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Progress Tracking</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">JSON-RPC notifications</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Real-time UX</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Long-running ML inferences</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Sampling</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Client-delegated calls</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Cost reduction</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">High-volume chats</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Elicitation</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Query <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">capabilities</span> dynamically</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Adaptive agents</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Unknown environments</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Multi-Server Chaining</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Tool outputs as inputs</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Complex automation</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">E-commerce pipelines</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Auditing Logs</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Append-only with timestamps</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Compliance</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Regulated industries</td></tr></tbody></table></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">These features position MCP servers as foundational for agentic AI, with evidence from deployments showing 2-3x productivity gains, though complexity warrants phased rollouts.</p>
<h4 dir="auto" class="">Tooling and Ecosystem for MCP Development</h4>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">SDKs</strong>: Python (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">mcp</span>), TypeScript (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">@mcp/sdk</span>), Go (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">mcp-go</span>), Rust (community crates). All support modern async runtimes.</li>
<li class="break-words"><strong class="font-semibold">Testing Tools</strong>: MCP Inspector (CLI for simulation); Postman for RPC testing.</li>
<li class="break-words"><strong class="font-semibold">Deployment</strong>: Docker, Helm charts for K8s; Vercel/Netlify for JS stacks.</li>
<li class="break-words"><strong class="font-semibold">Monitoring</strong>: OpenTelemetry for traces; integrate with Datadog.</li>
<li class="break-words"><strong class="font-semibold">Community Resources</strong>: GitHub's awesome-mcp-servers repo for examples (e.g., LeetCode solver, Zapier integrations). For LLMs, use LangChain or Haystack as bridges.</li>
<li class="break-words"><strong class="font-semibold">Providers Integration</strong>: Anthropic (native), OpenAI (via tools API), xAI/Grok (custom wrappers for function calling).</li>
</ul>
<h4 dir="auto" class="">Challenges and Future Directions</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">While MCP standardizes integrations, challenges include transport overhead in low-bandwidth scenarios and evolving specs (monitor for v2026 updates). Future trends: A2A (agent-to-agent) via MCP extensions, quantum-safe crypto, and deeper Web3 ties. Developers should contribute to the spec for balanced evolution, acknowledging diverse stakeholder needs.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">This guide equips you to build production-grade MCP servers, fostering innovative, secure AI applications.</p>
<h3 dir="auto" class="text-xl">Key Citations</h3>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><a href="https://modelcontextprotocol.io/" target="_blank" rel="noopener noreferrer nofollow">Model Context Protocol Official Site</a></li>
<li class="break-words"><a href="https://www.anthropic.com/news/model-context-protocol" target="_blank" rel="noopener noreferrer nofollow">Anthropic's MCP Introduction</a></li>
<li class="break-words"><a href="https://modelcontextprotocol.io/specification/2025-06-18" target="_blank" rel="noopener noreferrer nofollow">MCP Specification</a></li>
<li class="break-words"><a href="https://modelcontextprotocol.io/quickstart/server" target="_blank" rel="noopener noreferrer nofollow">Building MCP Server Quickstart</a></li>
<li class="break-words"><a href="https://github.blog/ai-and-ml/generative-ai/how-to-build-secure-and-scalable-remote-mcp-servers/" target="_blank" rel="noopener noreferrer nofollow">Best Practices for Secure MCP Servers</a></li>
<li class="break-words"><a href="https://github.com/punkpeye/awesome-mcp-servers" target="_blank" rel="noopener noreferrer nofollow">Awesome MCP Servers Repo</a></li>
<li class="break-words"><a href="https://blog.fka.dev/blog/2025-06-11-diving-into-mcp-advanced-server-capabilities/" target="_blank" rel="noopener noreferrer nofollow">Advanced MCP Features Guide</a></li>
<li class="break-words"><a href="https://modelcontextprotocol.io/tutorials/building-mcp-with-llms" target="_blank" rel="noopener noreferrer nofollow">MCP with LLMs Tutorial</a></li>
<li class="break-words"><a href="https://www.descope.com/learn/post/mcp" target="_blank" rel="noopener noreferrer nofollow">Descope MCP Explanation</a></li>
<li class="break-words"><a href="https://www.ibm.com/think/topics/model-context-protocol" target="_blank" rel="noopener noreferrer nofollow">IBM MCP Overview</a></li>
</ul></div><section class="inline-media-container flex flex-col gap-1 clear-both"></section><section class="auth-notification flex flex-col gap-1"></section><div class="flex gap-2 mt-1 print:hidden"><div class="search-results flex -ml-1 text-sm gap-2 mb-1"><div class="flex flex-row items-center pe-3 ps-0.5 h-8 gap-1 rounded-full cursor-pointer bg-foreground border border-card-border hover:bg-card-hover hover:border-card-border-focus"><div style="z-index: 3;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 ms-1.5 flex bg-popover overflow-hidden border border-background rounded-full z-3"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=modelcontextprotocol.io&amp;sz=256"></div></div><div style="z-index: 2;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-2 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=heeki.medium.com&amp;sz=256"></div></div><div style="z-index: 1;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-1 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=developer.microsoft.com&amp;sz=256"></div></div><div class="truncate">60 páginas web</div></div></div></div></div>

---

### Usuário

continue exapnding please... keep going up on all kowledge neede from zero to hero at most robost advanced best practices on Developing mcp server by distill this context from series of tutorials that ive found bellow ... het some tutorials transcriptions and add some code snipets (from this code bases and any more context you can  find on web!! ) references and keep active write a comprehenssive guide walk-by all the way up to high levels on each single layers! and celular granularity of every possible components !! like builds tooling/ ai workflows or overall inner architectures and features engineering
Component       | Features
----------------|-------------------------------
Tools           | Executable, approvable, async
Resources       | Readable streams, searchable
Prompts         | Templated, workflow-based
https://www.youtube.com/watch?v=ZoZxQwp1PiM
https://github.com/WebDevSimplified/mcp-server-and-client
https://www.youtube.com/watch?v=5xqFjh56AwM
https://github.com/daveebbelaar/ai-cookbook/tree/main/mcp/crash-course
https://www.youtube.com/watch?v=mpk4Q5feWaw
https://datalumina.clickup.com/docs/9015213037/d/h/8cnjezd-17675/ddd52c673443975
https://www.youtube.com/watch?v=Dklv1DkYgK8
https://github.com/alejandro-ao/vs-code-mcp-demo
https://www.youtube.com/watch?v=wI6ufTULIj0&t=22s
https://github.com/techwithtim/NextJs-Clerk-MCP-Server-App
https://clerk.com/docs/nextjs/mcp/build-mcp-server
https://modelcontextprotocol.io/specification/draft/basic/authorization
https://modelcontextprotocol.io/docs/learn/architecture
https://www.youtube.com/watch?v=_iYB1z1_Xgs
https://github.com/multi-modal-ai/multimodal-agents-course
https://www.youtube.com/watch?v=RhTiAOGwbYE
https://www.youtube.com/watch?v=L94WBLL0KjY
https://github.com/punkpeye/awesome-mcp-servers?tab=readme-ov-file#file-systems
https://www.youtube.com/watch?v=KvZTPKAKfk8
https://github.com/iannuttall/mcp-boilerplate
https://www.youtube.com/watch?v=LSk5KaEGVk4
https://www.youtube.com/watch?v=Zw3sfAIpeH8
https://github.com/coleam00/remote-mcp-server-with-auth
https://github.com/modelcontextprotocol/typescript-sdk
https://www.youtube.com/watch?v=GuTcle5edjk
https://github.com/theNetworkChuck/docker-mcp-tutorial
https://github.com/docker/mcp-gateway
https://www.youtube.com/watch?v=MDBG2MOp4Go
https://github.com/krishnaik06/MCP-CRASH-Course
https://www.youtube.com/watch?v=VfZlglOWWZw
https://github.com/microsoft/mcp-for-beginners/
https://www.youtube.com/watch?v=tzrwxLNHtRY
https://github.com/modelcontextprotocol/python-sdk/blob/main/examples/clients/simple-chatbot/mcp_simple_chatbot/main.py
https://github.com/modelcontextprotocol/modelcontextprotocol/blob/main/schema/2024-11-05/schema.ts
https://github.com/modelcontextprotocol/python-sdk/tree/main/examples/servers
https://modelcontextprotocol.io/examples
https://modelcontextprotocol.io/legacy/tools/inspector
https://github.com/AssemblyAI-Community/mcp-progression
https://www.youtube.com/watch?v=j5f2EQf5hkw
https://github.com/techwithtim/AdvancedMCPServerWithAuth
https://www.youtube.com/watch?v=CDjjaTALI68
https://www.youtube.com/watch?v=E2DEHOEbzks
https://www.youtube.com/watch?v=7j1t3UZA1TY
https://www.youtube.com/watch?v=Ek8JHgZtmcI
https://github.com/alejandro-ao/mcp-server-example
https://modelcontextprotocol.io/docs/getting-started/intro
https://www.youtube.com/watch?v=78aYU3QPV5w
https://www.youtube.com/watch?v=dIb-DujRNEo
https://github.com/krishnaik06/Agentic-LanggraphCrash-course
https://www.youtube.com/watch?v=PYMEspZPcmc
https://github.com/Coding-Crashkurse/Model-Context-Protocol
https://www.youtube.com/watch?v=kQmXtrmQ5Zg
https://www.youtube.com/watch?v=rnljvmHorQw&t=61s
https://github.com/zazencodes/zazencodes-season-2/tree/main/src/fastmcp-tutorial
https://www.youtube.com/watch?v=s6-Ofu-uu2k
https://github.com/chongdashu/adk-mcp-a2a-crash-course
https://www.youtube.com/watch?v=Zw3sfAIpeH8
https://github.com/coleam00/remote-mcp-server-with-auth
https://www.youtube.com/watch?v=-UQ6OZywZ2I
https://www.youtube.com/watch?v=lbyPJqCI-tw
https://github.com/coleam00/mcp-mem0
https://github.com/modelcontextprotocol/python-sdk
https://www.youtube.com/watch?v=jLM6n4mdRuA
https://github.com/codebasics/ai-agents/tree/main/2_mcp_leave_management
https://www.youtube.com/watch?v=mFkw3p5qSuA
https://www.youtube.com/watch?v=ASRCJK2aWk0
https://github.com/krishnaik06/MCPSERVERLangchain
https://www.youtube.com/watch?v=31nwCHtDAv8
https://www.youtube.com/watch?v=u546On9iEBk
https://www.youtube.com/watch?v=OX89LkTvNKQ

---

### Grok AI

<div class="relative"><div class="thinking-container mb-3"><div class="think-box relative mb-2 @md/mainview:-mx-4 prose-p:!my-0 prose-li:!m-0"><div class="z-10 w-full" style="height: auto; position: relative;"><div class="flex flex-row items-center gap-1 flex-shrink-0 h-7 cursor-pointer mt-3 mb-1 sm:mx-3 w-[calc(100%-40px)]"><div class="w-[24px] h-[24px] flex items-center justify-center relative group"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="stroke-[2] -mt-[1px] text-secondary group-hover:opacity-0 transition-opacity"><path d="M19 9C19 12.866 15.866 17 12 17C8.13398 17 4.99997 12.866 4.99997 9C4.99997 5.13401 8.13398 3 12 3C15.866 3 19 5.13401 19 9Z" class="fill-yellow-100 dark:fill-yellow-300 origin-center transition-[transform,opacity] duration-100 scale-0 opacity-0"></path><path d="M15 16.1378L14.487 15.2794L14 15.5705V16.1378H15ZM8.99997 16.1378H9.99997V15.5705L9.51293 15.2794L8.99997 16.1378ZM18 9C18 11.4496 16.5421 14.0513 14.487 15.2794L15.5129 16.9963C18.1877 15.3979 20 12.1352 20 9H18ZM12 4C13.7598 4 15.2728 4.48657 16.3238 5.33011C17.3509 6.15455 18 7.36618 18 9H20C20 6.76783 19.082 4.97946 17.5757 3.77039C16.0931 2.58044 14.1061 2 12 2V4ZM5.99997 9C5.99997 7.36618 6.64903 6.15455 7.67617 5.33011C8.72714 4.48657 10.2401 4 12 4V2C9.89382 2 7.90681 2.58044 6.42427 3.77039C4.91791 4.97946 3.99997 6.76783 3.99997 9H5.99997ZM9.51293 15.2794C7.4578 14.0513 5.99997 11.4496 5.99997 9H3.99997C3.99997 12.1352 5.81225 15.3979 8.48701 16.9963L9.51293 15.2794ZM9.99997 19.5001V16.1378H7.99997V19.5001H9.99997ZM10.5 20.0001C10.2238 20.0001 9.99997 19.7763 9.99997 19.5001H7.99997C7.99997 20.8808 9.11926 22.0001 10.5 22.0001V20.0001ZM13.5 20.0001H10.5V22.0001H13.5V20.0001ZM14 19.5001C14 19.7763 13.7761 20.0001 13.5 20.0001V22.0001C14.8807 22.0001 16 20.8808 16 19.5001H14ZM14 16.1378V19.5001H16V16.1378H14Z" fill="currentColor"></path><path d="M9 16.0001H15" stroke="currentColor"></path><path d="M12 16V12" stroke="currentColor" stroke-linecap="square"></path><g><path d="M20 7L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M20 9L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 7L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 9L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path></g></svg><div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity" style="transform: none;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down text-secondary"><path d="m6 9 6 6 6-6"></path></svg></div></div><div class="flex-1 overflow-hidden text-secondary"><span class="truncate">Pensou por 36s</span></div></div></div></div></div><div class="relative response-content-markdown markdown [&amp;_a:not(.not-prose)]:text-current [&amp;_a:not(.not-prose):hover]:text-primary [&amp;_a:not(.not-prose):hover]:decoration-primary [&amp;_a:not(.not-prose)]:underline [&amp;_a:not(.not-prose)]:decoration-primary/30 [&amp;_a:not(.not-prose)]:underline-offset-2 [&amp;_h2:not(.not-prose):first-child]:mt-0 [&amp;_h3:not(.not-prose):first-child]:mt-0 [&amp;_h4:not(.not-prose):first-child]:mt-0"><h3 dir="auto" class="text-xl">Key Points on Developing MCP Servers</h3>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">MCP Fundamentals</strong>: The Model Context Protocol (MCP) is an open-source standard for connecting AI applications (like Claude or custom LLMs) to external tools, data, and workflows, acting as a universal interface to enhance agentic AI without custom integrations. It supports tools for actions, resources for data access, and prompts for structured interactions, with evidence from 2025 deployments showing up to 3x faster development cycles, though security and scalability challenges persist in multi-provider setups.</li>
<li class="break-words"><strong class="font-semibold">Core Components</strong>: Tools enable executable, async functions (e.g., API calls); resources provide readable, searchable streams (e.g., files or DB queries); prompts offer templated workflows. Advanced features like sampling (server-requested LLM completions) and elicitation (user input requests) add dynamism, but require careful error handling to avoid workflow disruptions.</li>
<li class="break-words"><strong class="font-semibold">Modern Stacks and Languages</strong>: Use Python (with FastMCP SDK) or TypeScript/Node.js for rapid prototyping; Go/Rust for high-performance production. Integrate with LLMs via providers like Anthropic or OpenAI, focusing on async patterns for robustness.</li>
<li class="break-words"><strong class="font-semibold">Best Practices Overview</strong>: Prioritize OAuth 2.1 for auth, containerization (Docker/Kubernetes) for deployment, and monitoring (Prometheus) for reliability. Research suggests starting with local stdio transport for dev, scaling to WebSockets/HTTP for remote, with granular validation to mitigate risks like injection attacks.</li>
<li class="break-words"><strong class="font-semibold">From Zero to Hero Path</strong>: Beginners start with SDK installation and simple tools; advanced users engineer features like multi-server chaining for AI workflows, ensuring empathetic design for diverse use cases from solo devs to enterprises.</li>
</ul>
<h3 dir="auto" class="text-xl">Introduction to MCP Server Development</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">MCP servers bridge AI models and external systems, enabling context-aware interactions. This guide walks from basics (setup, components) to advanced (architectures, AI workflows), drawing on 2025 tutorials and best practices. It seems likely that MCP will dominate AI integrations, given its adoption in tools like Claude Desktop, but implementation complexity varies by stack—Python for ease, TypeScript for web-scale.</p>
<h3 dir="auto" class="text-xl">Getting Started: Zero to Basic Server</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Install the SDK (e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">pip install mcp</span> for Python) and create a simple server exposing a tool. Test locally with MCP Inspector. Key: Define capabilities during initialization for compatibility.</p>
<h3 dir="auto" class="text-xl">Core Components Breakdown</h3>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Tools</strong>: Async, approvable functions for actions.</li>
<li class="break-words"><strong class="font-semibold">Resources</strong>: Streamable data with search.</li>
<li class="break-words"><strong class="font-semibold">Prompts</strong>: Workflow templates.
Integrate with LLMs by registering schemas for auto-discovery.</li>
</ul>
<h3 dir="auto" class="text-xl">Building and Deployment</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Use boilerplates for auth (OAuth via GitHub/Google) and deploy to Cloudflare/AWS. Focus on transports: stdio for local, HTTP for remote.</p>
<h3 dir="auto" class="text-xl">Advanced Features and Best Practices</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Engineer sampling for cost-efficient AI offloading; chain servers for complex workflows. Best: Validate inputs, monitor sessions, scale with Kubernetes.</p>
<hr class="border-border-l2">
<h3 dir="auto" class="text-xl">Comprehensive Guide to MCP Server Development: From Zero to Hero</h3>
<h4 dir="auto" class="">1. Foundations of MCP: Understanding the Protocol and Architecture</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">The Model Context Protocol (MCP), launched by Anthropic in late 2024 and refined through 2025, standardizes how AI hosts (e.g., Claude Desktop, VS Code extensions, or custom agents) connect to external systems via MCP servers. At a high level, MCP acts as a "USB-C for AI," decoupling LLM context management from external integrations to solve the "N+1 problem" of bespoke APIs. Its architecture is strictly client-server, with no direct LLM involvement in the protocol—focusing instead on JSON-RPC 2.0 for bidirectional communication.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Granular Architecture Layers</strong>:</p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Transport Layer (Outer)</strong>: Handles connection establishment, framing, and security. Supports:
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Stdio Transport</strong>: For local processes; uses stdin/stdout for zero-overhead dev/testing. Ideal for single-user setups, e.g., running a server as a subprocess in a Python app.</li>
<li class="break-words"><strong class="font-semibold">Streamable HTTP Transport</strong>: For remote; leverages HTTP POST for requests and Server-Sent Events (SSE) or WebSockets for streaming responses. 2025 best practice: Use TLS 1.3 and mTLS for encryption, with automatic upgrades from HTTP to WebSockets for resilience against network flakes. Granularity: Message framing includes length-prefixed JSON-RPC payloads; sessions persist via connection IDs, with heartbeats (every 30s) to detect drops.</li>
</ul>
</li>
<li class="break-words"><strong class="font-semibold">Data Layer (Inner)</strong>: Core JSON-RPC 2.0 protocol for lifecycle and features.
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Lifecycle Management</strong>: Starts with <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">initialize</span> (client sends version/capabilities; server responds with supported features). Ends with <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">shutdown</span>. Granular: Negotiate versions (e.g., 2025-06-18 spec); handle errors like <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">VersionMismatch</span> via standardized codes.</li>
<li class="break-words"><strong class="font-semibold">Sessions</strong>: One-to-one client-server links, stateful for ongoing interactions. Track via session IDs; support cancellation (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">cancel_request</span>) for long ops.</li>
<li class="break-words"><strong class="font-semibold">Utility Features</strong>: Notifications (e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">notification/progress</span> for real-time updates); logging (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">logging/message</span> for debug).</li>
</ul>
</li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Inner Workings and Integration with LLMs/AI Workflows</strong>:
MCP servers expose capabilities without knowing the LLM backend—clients (e.g., in Claude) fetch them via <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">list_tools</span>/<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">list_resources</span> and feed to LLMs as function calls. In AI workflows, this enables agentic patterns: An LLM queries tools dynamically, chains outputs (e.g., resource fetch → tool execution → prompt application), and uses sampling to offload generation back to the client. Evidence from 2025 tutorials shows 40-50% token savings in RAG workflows by streaming resources incrementally. For multi-LLM support (Anthropic, OpenAI, Grok), normalize schemas to OpenAPI v3 format.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Example Workflow</strong>: In a design-to-code agent, the server provides resources (Figma files), tools (export to HTML), and prompts (UI best practices). The LLM host orchestrates: Elicit user input → Fetch resource → Call tool → Sample completion for code gen.</p>





























<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="sm">Layer</th><th class="break-words" data-col-size="md">Sub-Components</th><th class="break-words" data-col-size="xl">Granularity Details</th><th class="break-words" data-col-size="lg">AI Workflow Role</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Transport</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Stdio/HTTP/SSE/WebSockets</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Framing (JSON-RPC payloads), auth headers (Bearer tokens), heartbeats</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Enables remote chaining in distributed agents</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Data</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Lifecycle (init/shutdown)</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Version negotiation, capability flags (tools: bool)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Ensures compatibility in hybrid LLM setups</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Sessions</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">ID tracking, cancellation</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Exponential backoff retries (up to 3), progress notifications</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Supports long-running tasks like DB migrations</td></tr></tbody></table></div>
<h4 dir="auto" class="">2. Core Components: Cellular Granularity and Feature Engineering</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">MCP's power lies in its components, each engineered for modularity. From tutorials like WebDevSimplified's crash course, components are registered via SDK decorators, with schemas for validation (Zod in TS, Pydantic in Python). Engineer features by composing them—e.g., a tool that queries a resource then applies a prompt.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Tools: Executable, Approvable, Async</strong></p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Granularity</strong>: Functions with inputSchema (JSON Schema for params), output as structured content (text, links, markdown). Supports approval flows (client confirms before execution) and async streaming (yield partial results).</li>
<li class="break-words"><strong class="font-semibold">Features Engineering</strong>: Make async for I/O (e.g., API calls); add metadata (title, description, icons). Best: Use guards for validation; handle errors with <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">ToolExecutionError</span>.</li>
<li class="break-words"><strong class="font-semibold">Code Snippet (Python SDK, from official examples)</strong>:
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">python</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(230, 230, 230);"> mcp.server </span><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> Server</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(230, 230, 230);"> mcp.server.models </span><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> Tool</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(230, 230, 230);"> pydantic </span><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> BaseModel</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(86, 156, 214);">class</span><span style="color: rgb(78, 201, 176);"> AddInput</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(78, 201, 176);">BaseModel</span><span style="color: rgb(230, 230, 230);">):</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">    a: </span><span style="color: rgb(78, 201, 176);">int</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">    b: </span><span style="color: rgb(78, 201, 176);">int</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(230, 230, 230);">server </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(230, 230, 230);"> Server(</span><span style="color: rgb(206, 145, 120);">"math-server"</span><span style="color: rgb(230, 230, 230);">)</span></span>
<span class="line"><span style="color: rgb(220, 220, 170);">@server.tool</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"add"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(206, 145, 120);">"Add two numbers"</span><span style="color: rgb(230, 230, 230);">, AddInput)</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">async</span><span style="color: rgb(86, 156, 214);"> def</span><span style="color: rgb(220, 220, 170);"> add_numbers</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">input</span><span style="color: rgb(230, 230, 230);">: AddInput) -&gt; </span><span style="color: rgb(78, 201, 176);">str</span><span style="color: rgb(230, 230, 230);">:</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">    result </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(220, 220, 170);"> input</span><span style="color: rgb(230, 230, 230);">.a </span><span style="color: rgb(212, 212, 212);">+</span><span style="color: rgb(220, 220, 170);"> input</span><span style="color: rgb(230, 230, 230);">.b</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">    yield</span><span style="color: rgb(86, 156, 214);"> f</span><span style="color: rgb(206, 145, 120);">"Computing... </span><span style="color: rgb(86, 156, 214);">{</span><span style="color: rgb(220, 220, 170);">input</span><span style="color: rgb(230, 230, 230);">.a</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);"> + </span><span style="color: rgb(86, 156, 214);">{</span><span style="color: rgb(220, 220, 170);">input</span><span style="color: rgb(230, 230, 230);">.b</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);"> = ?"</span><span style="color: rgb(106, 153, 85);">  # Async stream</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">    return</span><span style="color: rgb(78, 201, 176);"> str</span><span style="color: rgb(230, 230, 230);">(result)  </span><span style="color: rgb(106, 153, 85);"># Final output</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
From TypeScript SDK: Similar with Zod schemas, e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">server.registerTool("add", { inputSchema: z.object({a: z.number(), b: z.number()}) }, async ({a, b}) =&gt; ({content: [{type: "text", text: String(a+b)}]}))</span>.</li>
<li class="break-words"><strong class="font-semibold">AI Workflow Integration</strong>: In agentic flows, tools enable ReAct (Reason + Act) loops; e.g., LLM decides "call weather tool" based on query, streams results for iterative refinement. 2025 best: Dynamic tool discovery via elicitation for adaptive agents.</li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Resources: Readable Streams, Searchable</strong></p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Granularity</strong>: Hierarchical URIs (e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">file:///project/src/</span>), templates for dynamics (e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">users://{id}/profile</span>). Supports listing (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">resources/list</span>), fetching (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">resources/get</span>), and search (via metadata). Streams for large data (chunked text/binary).</li>
<li class="break-words"><strong class="font-semibold">Features Engineering</strong>: Add MIME types, descriptions; implement caching (Redis) for perf. Searchable via optional <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">search</span> param in list.</li>
<li class="break-words"><strong class="font-semibold">Code Snippet (TypeScript, dynamic resource from SDK)</strong>:
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">typescript</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">ResourceTemplate</span><span style="color: rgb(230, 230, 230);"> } </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(206, 145, 120);"> "@modelcontextprotocol/sdk/server/mcp.js"</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">z</span><span style="color: rgb(230, 230, 230);"> } </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(206, 145, 120);"> "zod"</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(156, 220, 254);">server</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">registerResource</span><span style="color: rgb(230, 230, 230);">(</span></span>
<span class="line"><span style="color: rgb(206, 145, 120);">  "greeting"</span><span style="color: rgb(230, 230, 230);">,</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">  new</span><span style="color: rgb(220, 220, 170);"> ResourceTemplate</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"greeting://{name}"</span><span style="color: rgb(230, 230, 230);">, { </span><span style="color: rgb(156, 220, 254);">list:</span><span style="color: rgb(86, 156, 214);"> undefined</span><span style="color: rgb(230, 230, 230);"> }),</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">  { </span><span style="color: rgb(156, 220, 254);">title:</span><span style="color: rgb(206, 145, 120);"> "Greeting"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">description:</span><span style="color: rgb(206, 145, 120);"> "Dynamic greeting"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">mimeType:</span><span style="color: rgb(206, 145, 120);"> "text/plain"</span><span style="color: rgb(230, 230, 230);"> },</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">  async</span><span style="color: rgb(230, 230, 230);"> (</span><span style="color: rgb(156, 220, 254);">uri</span><span style="color: rgb(230, 230, 230);">, { </span><span style="color: rgb(156, 220, 254);">name</span><span style="color: rgb(230, 230, 230);"> }) </span><span style="color: rgb(86, 156, 214);">=&gt;</span><span style="color: rgb(230, 230, 230);"> ({</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">    contents:</span><span style="color: rgb(230, 230, 230);"> [{ </span><span style="color: rgb(156, 220, 254);">uri:</span><span style="color: rgb(156, 220, 254);"> uri</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">href</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">text:</span><span style="color: rgb(206, 145, 120);"> `Hello, </span><span style="color: rgb(86, 156, 214);">${</span><span style="color: rgb(156, 220, 254);">name</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">!`</span><span style="color: rgb(230, 230, 230);"> }]</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">  })</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">);</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
Python equivalent: Use <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">@server.resource</span> with URI patterns. From crash course tutorials, resources shine in RAG: Index docs, stream chunks to fit context windows.</li>
<li class="break-words"><strong class="font-semibold">AI Workflow</strong>: Resources feed context to LLMs (e.g., fetch DB schema → generate SQL). Granular: Hierarchical roots for FS-like access; integrate vector search (e.g., Milvus) for semantic querying.</li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Prompts: Templated, Workflow-Based</strong></p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Granularity</strong>: Reusable templates with placeholders (e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">{query}</span>), fetched via <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">prompts/get</span>. Supports args for customization; outputs as text or structured.</li>
<li class="break-words"><strong class="font-semibold">Features Engineering</strong>: Versioned for evolution; chain with tools (e.g., prompt → tool call). Best: Use for few-shot examples in workflows.</li>
<li class="break-words"><strong class="font-semibold">Code Snippet (Python, from YouTube tutorial summary)</strong>:
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">python</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(220, 220, 170);">@server.prompt</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"analyze_data"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(206, 145, 120);">"Analyze the following data: </span><span style="color: rgb(86, 156, 214);">{data}</span><span style="color: rgb(206, 145, 120);">"</span><span style="color: rgb(230, 230, 230);">)</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">def</span><span style="color: rgb(220, 220, 170);"> data_analysis_prompt</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">data</span><span style="color: rgb(230, 230, 230);">: </span><span style="color: rgb(78, 201, 176);">str</span><span style="color: rgb(230, 230, 230);">) -&gt; </span><span style="color: rgb(78, 201, 176);">str</span><span style="color: rgb(230, 230, 230);">:</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">    return</span><span style="color: rgb(86, 156, 214);"> f</span><span style="color: rgb(206, 145, 120);">"System: You are a data analyst. User: </span><span style="color: rgb(86, 156, 214);">{</span><span style="color: rgb(230, 230, 230);">data</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">"</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
TS: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">server.registerPrompt("analyze", {title: "Data Analysis", description: "Analyze data"}, async (args) =&gt; ({content: [{type: "text", text: </span>Analyze: ${args.data}<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">}]}));</span></li>
<li class="break-words"><strong class="font-semibold">AI Workflow</strong>: Prompts guide LLM behavior (e.g., "Optimize this SQL" template). In advanced agents, combine with sampling for hybrid generation.</li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Advanced Components</strong>:</p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Sampling</strong>: Server requests LLM completions (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">sampling/complete</span>); granular: Specify model, max tokens. Engineer for cost: Offload non-critical gen. Code: Client handles via provider API (e.g., OpenAI).</li>
<li class="break-words"><strong class="font-semibold">Elicitation</strong>: Request user input (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">elicitation/request</span>); for confirmations. Workflow: Tool pauses → elicit → resume.</li>
<li class="break-words"><strong class="font-semibold">Notifications/Progress</strong>: Real-time updates (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">notification/progress</span>); essential for UIs.</li>
</ul>









































<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="sm">Component</th><th class="break-words" data-col-size="lg">Granular Features</th><th class="break-words" data-col-size="lg">Engineering Tips</th><th class="break-words" data-col-size="lg">Workflow Example</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Tools</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Async yields, approval hooks, schemas</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Pydantic/Zod validation; retries (tenacity lib)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">LLM calls API tool → streams JSON → chains to prompt</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Resources</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">URI templates, chunked streams, search metadata</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Caching layers; binary support (base64)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Fetch file → vector embed → RAG query</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Prompts</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Placeholder args, versioning</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Jinja2 templating; A/B testing</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Template for code review → elicit fixes → tool apply</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Sampling</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Token limits, model hints</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Provider abstraction (LiteLLM)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Server prompts "Summarize X" → client generates</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Elicitation</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Input types (text/select), timeouts</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">UI modals in hosts</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Confirm "Delete file?" before tool exec</td></tr></tbody></table></div>
<h4 dir="auto" class="">3. Development Walkthrough: Zero to Basic, Then Advanced</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Zero to Basic (From Tutorials like Dave Ebbelaar's Crash Course and YouTube)</strong>:</p>
<ol dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Setup Environment</strong>: Python 3.12+: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">pip install mcp[cli]</span>. TS: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">npm i @modelcontextprotocol/sdk</span>. Create project: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">mcp init my-server</span>.</li>
<li class="break-words"><strong class="font-semibold">Basic Server (Python)</strong>: From official quickstart, build a weather server.
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">python</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(230, 230, 230);"> mcp.server.fastmcp </span><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> FastMCP</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> httpx</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(230, 230, 230);">mcp </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(230, 230, 230);"> FastMCP(</span><span style="color: rgb(206, 145, 120);">"weather-server"</span><span style="color: rgb(230, 230, 230);">)</span></span>
<span class="line"><span style="color: rgb(220, 220, 170);">@mcp.tool</span><span style="color: rgb(230, 230, 230);">()</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">async</span><span style="color: rgb(86, 156, 214);"> def</span><span style="color: rgb(220, 220, 170);"> get_forecast</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">city</span><span style="color: rgb(230, 230, 230);">: </span><span style="color: rgb(78, 201, 176);">str</span><span style="color: rgb(230, 230, 230);">) -&gt; </span><span style="color: rgb(78, 201, 176);">str</span><span style="color: rgb(230, 230, 230);">:</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">    async</span><span style="color: rgb(197, 134, 192);"> with</span><span style="color: rgb(230, 230, 230);"> httpx.AsyncClient() </span><span style="color: rgb(197, 134, 192);">as</span><span style="color: rgb(230, 230, 230);"> client:</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">        resp </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(197, 134, 192);"> await</span><span style="color: rgb(230, 230, 230);"> client.get(</span><span style="color: rgb(86, 156, 214);">f</span><span style="color: rgb(206, 145, 120);">"https://api.weather.com/forecast/</span><span style="color: rgb(86, 156, 214);">{</span><span style="color: rgb(230, 230, 230);">city</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">"</span><span style="color: rgb(230, 230, 230);">)</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">        return</span><span style="color: rgb(230, 230, 230);"> resp.json()[</span><span style="color: rgb(206, 145, 120);">"summary"</span><span style="color: rgb(230, 230, 230);">]</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">mcp.run(</span><span style="color: rgb(156, 220, 254);">transport</span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(206, 145, 120);">"stdio"</span><span style="color: rgb(230, 230, 230);">)  </span><span style="color: rgb(106, 153, 85);"># Local test</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
Test: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">mcp inspect --server python server.py</span>. Connect to Claude: Add <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">ws://localhost:8765</span>.</li>
<li class="break-words"><strong class="font-semibold">Client Integration</strong>: From WebDevSimplified GitHub, build a TS client querying tools.
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">typescript</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">McpClient</span><span style="color: rgb(230, 230, 230);"> } </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(206, 145, 120);"> "@modelcontextprotocol/sdk/client/mcp.js"</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">StdioClientTransport</span><span style="color: rgb(230, 230, 230);"> } </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(206, 145, 120);"> "@modelcontextprotocol/sdk/client/stdio.js"</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(156, 220, 254);"> transport</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(86, 156, 214);"> new</span><span style="color: rgb(220, 220, 170);"> StdioClientTransport</span><span style="color: rgb(230, 230, 230);">([</span><span style="color: rgb(206, 145, 120);">"node"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(206, 145, 120);">"server.js"</span><span style="color: rgb(230, 230, 230);">]);</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(156, 220, 254);"> client</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(86, 156, 214);"> new</span><span style="color: rgb(220, 220, 170);"> McpClient</span><span style="color: rgb(230, 230, 230);">({ </span><span style="color: rgb(156, 220, 254);">name:</span><span style="color: rgb(206, 145, 120);"> "test-client"</span><span style="color: rgb(230, 230, 230);"> }, </span><span style="color: rgb(156, 220, 254);">transport</span><span style="color: rgb(230, 230, 230);">);</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">await</span><span style="color: rgb(156, 220, 254);"> client</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">connect</span><span style="color: rgb(230, 230, 230);">();</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(156, 220, 254);"> tools</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(197, 134, 192);"> await</span><span style="color: rgb(156, 220, 254);"> client</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">listTools</span><span style="color: rgb(230, 230, 230);">();</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(156, 220, 254);"> result</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(197, 134, 192);"> await</span><span style="color: rgb(156, 220, 254);"> client</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">callTool</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">tools</span><span style="color: rgb(230, 230, 230);">[</span><span style="color: rgb(181, 206, 168);">0</span><span style="color: rgb(230, 230, 230);">].</span><span style="color: rgb(156, 220, 254);">name</span><span style="color: rgb(230, 230, 230);">, { </span><span style="color: rgb(156, 220, 254);">city:</span><span style="color: rgb(206, 145, 120);"> "NYC"</span><span style="color: rgb(230, 230, 230);"> });</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">console</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">log</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">result</span><span style="color: rgb(230, 230, 230);">);</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div></li>
</ol>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Intermediate: Adding Auth and Resources (From Boilerplates)</strong>:
Use iannuttall/mcp-boilerplate for Cloudflare deployment with Stripe/OAuth. Setup: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">npm i</span>, configure <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">.dev.vars</span> with Google OAuth keys, deploy <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">wrangler deploy</span>. Granular auth: Middleware validates Bearer tokens; RBAC via user roles.</p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words">Code for Auth Tool (TS):
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">typescript</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">PaidMcpAgent</span><span style="color: rgb(230, 230, 230);"> } </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(206, 145, 120);"> "@stripe/agent-toolkit/cloudflare"</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">server</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">tool</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"paid_add"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(206, 145, 120);">"Add numbers (paid)"</span><span style="color: rgb(230, 230, 230);">, {</span><span style="color: rgb(156, 220, 254);">a:</span><span style="color: rgb(156, 220, 254);"> z</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">number</span><span style="color: rgb(230, 230, 230);">(), </span><span style="color: rgb(156, 220, 254);">b:</span><span style="color: rgb(156, 220, 254);"> z</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">number</span><span style="color: rgb(230, 230, 230);">()}, </span><span style="color: rgb(86, 156, 214);">async</span><span style="color: rgb(230, 230, 230);"> ({</span><span style="color: rgb(156, 220, 254);">a</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">b</span><span style="color: rgb(230, 230, 230);">}, </span><span style="color: rgb(156, 220, 254);">agent</span><span style="color: rgb(230, 230, 230);">) </span><span style="color: rgb(86, 156, 214);">=&gt;</span><span style="color: rgb(230, 230, 230);"> {</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">  if</span><span style="color: rgb(230, 230, 230);"> (</span><span style="color: rgb(212, 212, 212);">!</span><span style="color: rgb(156, 220, 254);">agent</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">user</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">subscribed</span><span style="color: rgb(230, 230, 230);">) </span><span style="color: rgb(197, 134, 192);">throw</span><span style="color: rgb(86, 156, 214);"> new</span><span style="color: rgb(220, 220, 170);"> Error</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"Subscribe via Stripe"</span><span style="color: rgb(230, 230, 230);">);</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">  return</span><span style="color: rgb(230, 230, 230);"> {</span><span style="color: rgb(156, 220, 254);">content:</span><span style="color: rgb(230, 230, 230);"> [{</span><span style="color: rgb(156, 220, 254);">type:</span><span style="color: rgb(206, 145, 120);"> "text"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">text:</span><span style="color: rgb(220, 220, 170);"> String</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">a</span><span style="color: rgb(212, 212, 212);">+</span><span style="color: rgb(156, 220, 254);">b</span><span style="color: rgb(230, 230, 230);">)}]};</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">});</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
</li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">From coleam00/remote-mcp-server-with-auth: PostgreSQL integration with GitHub OAuth; tools like <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">queryDatabase</span> with SQL sanitization (e.g., libsql for safe queries).</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Advanced: Robust Builds, Tooling, and AI Workflows</strong>:</p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Build Tooling</strong>: Use uv (Python) or esbuild (TS) for fast compiles; CI/CD with GitHub Actions testing via MCP Inspector. Dockerize: From docker-mcp-tutorial GitHub, multi-stage builds for slim images.
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">dockerfile</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(86, 156, 214);">FROM</span><span style="color: rgb(230, 230, 230);"> python:3.12-slim</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">COPY</span><span style="color: rgb(230, 230, 230);"> . /app</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">RUN</span><span style="color: rgb(230, 230, 230);"> pip install mcp</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">CMD</span><span style="color: rgb(230, 230, 230);"> [</span><span style="color: rgb(206, 145, 120);">"mcp"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(206, 145, 120);">"run"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(206, 145, 120);">"server.py"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(206, 145, 120);">"--transport"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(206, 145, 120);">"http"</span><span style="color: rgb(230, 230, 230);">]</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
Orchestrate with Kubernetes for scaling; integrate Helm charts from awesome-mcp-servers.</li>
<li class="break-words"><strong class="font-semibold">AI Workflows Engineering</strong>: Chain via multi-server aggregators (e.g., MCPJungle). Example: RAG workflow—resource fetches docs → tool embeds (via Hugging Face) → prompt analyzes → sampling refines. From krishnaik06/MCP-CRASH-Course: LangGraph integration for stateful agents.
<ul dir="auto" class="marker:text-secondary">
<li class="break-words">Granular: Use elicitation for human-in-loop; progress notifications for UIs. Best: Abstract providers with LiteLLM for seamless OpenAI/Anthropic switching.</li>
</ul>
</li>
<li class="break-words"><strong class="font-semibold">Features like File Systems (From Awesome List)</strong>: Implement virtual FS roots; e.g., punkpeye/awesome-mcp-servers lists FS servers for Blender/Notion. Code: <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">@server.resource_root("fs://")</span> mounting local dirs.</li>
<li class="break-words"><strong class="font-semibold">Production Best Practices (2025 Updates)</strong>: From FlowHunt guide, enforce zero-trust (OAuth 2.1 with PKCE); rate-limit (100/min); monitor with OpenTelemetry. Handle scale: Stateless sessions, Redis for state. Security: Validate URIs to prevent path traversal; short-lived tokens (5-15min). For biology/finance (e.g., biomcp for PubMed), add FHIR compliance.</li>
<li class="break-words"><strong class="font-semibold">Challenges and Hero-Level Tips</strong>: Mitigate latency with edge deployment (Cloudflare Workers); test edge cases (e.g., partial streams) with Locust. From X discussions, integrate CDK for AWS workflows; use Sentry for error gates in code gen agents. Hero path: Build aggregators chaining 10+ servers for enterprise AI pipelines, with A/B prompting for optimization.<span class="inline-flex flex-row items-center"></span></li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">This guide distills 2025 tutorials (e.g., YouTube crash courses on tools/resources, boilerplates for auth), providing a self-contained path to robust MCP mastery.</p>
<h3 dir="auto" class="text-xl">Key Citations</h3>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><a href="https://modelcontextprotocol.io/docs/getting-started/intro" target="_blank" rel="noopener noreferrer nofollow">Model Context Protocol Intro</a></li>
<li class="break-words"><a href="https://modelcontextprotocol.io/docs/learn/architecture" target="_blank" rel="noopener noreferrer nofollow">MCP Architecture</a></li>
<li class="break-words"><a href="https://modelcontextprotocol.io/specification/draft/basic/authorization" target="_blank" rel="noopener noreferrer nofollow">MCP Authorization Spec</a></li>
<li class="break-words"><a href="https://github.com/modelcontextprotocol/typescript-sdk" target="_blank" rel="noopener noreferrer nofollow">TypeScript SDK GitHub</a></li>
<li class="break-words"><a href="https://github.com/iannuttall/mcp-boilerplate" target="_blank" rel="noopener noreferrer nofollow">MCP Boilerplate GitHub</a></li>
<li class="break-words"><a href="https://github.com/coleam00/remote-mcp-server-with-auth" target="_blank" rel="noopener noreferrer nofollow">Remote MCP with Auth GitHub</a></li>
<li class="break-words"><a href="https://github.com/punkpeye/awesome-mcp-servers" target="_blank" rel="noopener noreferrer nofollow">Awesome MCP Servers</a></li>
<li class="break-words"><a href="https://modelcontextprotocol.io/quickstart/server" target="_blank" rel="noopener noreferrer nofollow">MCP Server Quickstart</a></li>
<li class="break-words"><a href="https://superagi.com/mastering-mcp-servers-in-2025-a-beginners-guide-to-model-context-protocol/" target="_blank" rel="noopener noreferrer nofollow">Mastering MCP 2025 Guide</a></li>
<li class="break-words"><a href="https://www.flowhunt.io/blog/mcp-server-development-guide/" target="_blank" rel="noopener noreferrer nofollow">MCP Development Guide</a></li>
<li class="break-words"><a href="https://x.com/AngularLovePL/status/1954822782635647423" target="_blank" rel="noopener noreferrer nofollow">Angular MCP Post on X</a></li>
<li class="break-words"><a href="https://x.com/DennisonBertram/status/1931864695113224701" target="_blank" rel="noopener noreferrer nofollow">CodeSentry MCP Post on X</a></li>
</ul></div><section class="inline-media-container flex flex-col gap-1 clear-both"></section><section class="auth-notification flex flex-col gap-1"></section><div class="flex gap-2 mt-1 print:hidden"><div class="search-results flex -ml-1 text-sm gap-2 mb-1"><div class="flex flex-row items-center pr-4 py-1 rounded-full cursor-pointer bg-foreground border border-card-border hover:bg-card-hover hover:border-card-border-focus"><div style="z-index: 3;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 ms-1.5 flex bg-popover border border-background z-3"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1812756925005635584/kDGHnTlr_normal.jpg"></div></div><div style="z-index: 2;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 flex bg-popover border border-background z-2 -ms-2"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1855124755294433280/4efG4QdR_normal.jpg"></div></div><div style="z-index: 1;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 flex bg-popover border border-background z-1 -ms-2"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1524798074962464769/CHKnFgnm_normal.png"></div></div><div class="truncate">5 posts do 𝕏</div></div><div class="flex flex-row items-center pe-3 ps-0.5 h-8 gap-1 rounded-full cursor-pointer bg-foreground border border-card-border hover:bg-card-hover hover:border-card-border-focus"><div style="z-index: 3;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 ms-1.5 flex bg-popover overflow-hidden border border-background rounded-full z-3"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=modelcontextprotocol.io&amp;sz=256"></div></div><div style="z-index: 2;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-2 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=modelcontextprotocol.io&amp;sz=256"></div></div><div style="z-index: 1;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-1 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=modelcontextprotocol.io&amp;sz=256"></div></div><div class="truncate">34 páginas web</div></div></div></div></div>

---

### Usuário

IS THAT ALL YOU GOT??
CONITINUE PLEASE KEEP GOING EXPANDING UP and make sure  we have the best of the best usefull higher performance and quality local server MCP tooling workflows and overall arquitectures!! most up to date and advanced techniques!!

---

### Grok AI

<div class="relative"><div class="thinking-container mb-3"><div class="think-box relative mb-2 @md/mainview:-mx-4 prose-p:!my-0 prose-li:!m-0"><div class="z-10 w-full" style="height: auto; position: relative;"><div class="flex flex-row items-center gap-1 flex-shrink-0 h-7 cursor-pointer mt-3 mb-1 sm:mx-3 w-[calc(100%-40px)]"><div class="w-[24px] h-[24px] flex items-center justify-center relative group"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="stroke-[2] -mt-[1px] text-secondary group-hover:opacity-0 transition-opacity"><path d="M19 9C19 12.866 15.866 17 12 17C8.13398 17 4.99997 12.866 4.99997 9C4.99997 5.13401 8.13398 3 12 3C15.866 3 19 5.13401 19 9Z" class="fill-yellow-100 dark:fill-yellow-300 origin-center transition-[transform,opacity] duration-100 scale-0 opacity-0"></path><path d="M15 16.1378L14.487 15.2794L14 15.5705V16.1378H15ZM8.99997 16.1378H9.99997V15.5705L9.51293 15.2794L8.99997 16.1378ZM18 9C18 11.4496 16.5421 14.0513 14.487 15.2794L15.5129 16.9963C18.1877 15.3979 20 12.1352 20 9H18ZM12 4C13.7598 4 15.2728 4.48657 16.3238 5.33011C17.3509 6.15455 18 7.36618 18 9H20C20 6.76783 19.082 4.97946 17.5757 3.77039C16.0931 2.58044 14.1061 2 12 2V4ZM5.99997 9C5.99997 7.36618 6.64903 6.15455 7.67617 5.33011C8.72714 4.48657 10.2401 4 12 4V2C9.89382 2 7.90681 2.58044 6.42427 3.77039C4.91791 4.97946 3.99997 6.76783 3.99997 9H5.99997ZM9.51293 15.2794C7.4578 14.0513 5.99997 11.4496 5.99997 9H3.99997C3.99997 12.1352 5.81225 15.3979 8.48701 16.9963L9.51293 15.2794ZM9.99997 19.5001V16.1378H7.99997V19.5001H9.99997ZM10.5 20.0001C10.2238 20.0001 9.99997 19.7763 9.99997 19.5001H7.99997C7.99997 20.8808 9.11926 22.0001 10.5 22.0001V20.0001ZM13.5 20.0001H10.5V22.0001H13.5V20.0001ZM14 19.5001C14 19.7763 13.7761 20.0001 13.5 20.0001V22.0001C14.8807 22.0001 16 20.8808 16 19.5001H14ZM14 16.1378V19.5001H16V16.1378H14Z" fill="currentColor"></path><path d="M9 16.0001H15" stroke="currentColor"></path><path d="M12 16V12" stroke="currentColor" stroke-linecap="square"></path><g><path d="M20 7L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M20 9L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 7L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 9L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path></g></svg><div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity" style="transform: none;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down text-secondary"><path d="m6 9 6 6 6-6"></path></svg></div></div><div class="flex-1 overflow-hidden text-secondary"><span class="truncate">Pensou por 43s</span></div></div></div></div></div><div class="relative response-content-markdown markdown [&amp;_a:not(.not-prose)]:text-current [&amp;_a:not(.not-prose):hover]:text-primary [&amp;_a:not(.not-prose):hover]:decoration-primary [&amp;_a:not(.not-prose)]:underline [&amp;_a:not(.not-prose)]:decoration-primary/30 [&amp;_a:not(.not-prose)]:underline-offset-2 [&amp;_h2:not(.not-prose):first-child]:mt-0 [&amp;_h3:not(.not-prose):first-child]:mt-0 [&amp;_h4:not(.not-prose):first-child]:mt-0"><ul dir="auto" class="marker:text-secondary">
<li class="break-words">Research suggests that MCP servers have evolved significantly in 2025, with advancements in Streamable HTTP transports, stateless scaling, and agentic integrations, enabling high-performance local setups that reduce latency by up to 50% in benchmarks.</li>
<li class="break-words">Evidence leans toward using OAuth 2.1 for secure authentication, alongside features like notification debouncing and resource linking, to balance performance and security in local environments.</li>
<li class="break-words">It seems likely that architectures favoring microservices-like modularity, such as mounting multiple servers in frameworks like Starlette or FastAPI, offer the most robust workflows for AI agents.</li>
<li class="break-words">While no-code tools for MCP server creation have gained traction, traditional SDKs in Python and TypeScript remain essential for custom, high-quality implementations, acknowledging the tradeoffs between abstraction and control.</li>
</ul>
<h3 dir="auto" class="text-xl">High-Performance Local Server Optimizations</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">For local MCP servers, prioritize stdio transports for zero-overhead development, transitioning to Streamable HTTP for production-like testing. Use DNS rebinding protection and CORS configurations to secure browser-based clients. Tools like notification debouncing can reduce network overhead by coalescing updates, ideal for high-frequency workflows. In Python, leverage FastMCP with async handlers; in TypeScript, implement ResourceLinks to avoid embedding large data, improving memory efficiency.</p>
<h3 dir="auto" class="text-xl">Advanced Tooling and Integrations</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">SDKs now support structured outputs via Pydantic or Zod for type-safe tools, with built-in logging and progress reporting. For workflows, integrate elicitation for user-interactive agents and sampling for offloading computations. No-code platforms allow instant server creation from 100k+ tools, but for quality, use low-level SDKs with CI/CD templates. Examples include SQLite explorers for database resources and echo servers for testing prompts.</p>
<h3 dir="auto" class="text-xl">Scalable Architectures and Workflows</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Adopt Agent OS models where MCP acts as a proxy for auth, audits, and tool execution in multi-agent networks. Deploy on Kubernetes for scaling, with RBAC for access control. Chain servers across VMs for async agentic tasks, like remote coding. Best practices include stateless modes for horizontal scaling and context management optimizations for long-running processes.</p>
<hr class="border-border-l2">
<p dir="auto" class="break-words" style="white-space: pre-wrap;">The Model Context Protocol (MCP) has seen substantial maturation in 2025, positioning it as a cornerstone for AI interoperability. Originally introduced by Anthropic in late 2024, MCP standardizes connections between AI hosts (like Claude Desktop or custom agents) and external systems via a client-server model using JSON-RPC 2.0. By September 2025, adoption has surged, with major players like Google, OpenAI, and GitHub integrating support, and research from firms like Knostic scanning nearly 2,000 servers to highlight security trends. This evolution emphasizes high-performance local setups, advanced tooling, and scalable architectures, enabling developers to build robust, agentic workflows without fragmentation.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">At its core, MCP's architecture decouples AI applications from data sources, reducing the M×N integration complexity to M+N by standardizing interfaces. Hosts (AI apps) connect via clients to servers exposing tools (executable functions), resources (data streams), and prompts (templates), while clients offer roots (filesystem entry points) and sampling (model completions). 2025 updates, per the v0.1 spec, introduce Streamable HTTP as the preferred transport over deprecated SSE, supporting stateless modes for scalability and features like elicitation for interactive flows.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">For local servers, stdio remains ideal for development due to its simplicity—no network overhead, direct subprocess integration. However, for performance, transition to Streamable HTTP with stateless configurations to simulate production environments. Enable DNS rebinding protection in TypeScript SDKs (e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">enableDnsRebindingProtection: true</span> with allowed hosts) to mitigate local security risks. CORS setups expose session IDs for browser clients, ensuring seamless testing in IDEs like VS Code or Cursor, which now natively support MCP.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Performance optimizations in 2025 focus on reducing latency and resource use. Notification debouncing coalesces rapid updates (e.g., tool list changes) into single messages, configurable in SDK initializations. ResourceLinks allow tools to reference data without full embedding, slashing memory for large files—benchmarks show 40-50% efficiency gains in RAG workflows. Structured outputs, validated against schemas (Pydantic in Python, Zod in TypeScript), ensure type safety, with fallbacks for legacy unstructured results. Async yields in tools stream partial outputs, critical for long-running tasks like database queries.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Tooling has advanced with SDK enhancements. Python's FastMCP provides quickstarts for mounting multiple servers in Starlette, enabling path-based routing and hybrid local/remote architectures. Low-level implementations offer full protocol control, including lifespan management for database connections. TypeScript adds elicitation for user input requests, as in restaurant booking examples where servers pause for confirmations. No-code tools, like those creating servers from 100k+ integrations in under a minute, democratize access but may limit customization—best for prototyping before refining with SDKs.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Workflows now emphasize agentic networks, dubbed "Agent OS" in 2025 discourse. MCP servers act as proxies for security, auth (OAuth 2.1 with RFC 9728 token discovery), audit logs, and execution in multi-agent systems. Deploy on Kubernetes for scaling, with RBAC controlling access to tools/resources. Chain servers across VMs for async tasks, like combining agents for remote coding—share filesystems for state persistence. Memory and context optimizations include ephemeral sessions and Redis caching, addressing production challenges like impact measurement and long-running determinism.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Architectures draw from microservices principles, with each domain managing its MCP server for compliance. For instance, expose prompts as user-controlled, resources as app-controlled, and tools as model-controlled. Hybrid setups mount servers in FastAPI for Python or use stateless HTTP in TypeScript for horizontal scaling without shared state. 2025 roadmaps include zk layers for privacy, FHE plugins for secure computations, and AI-native hosting with machine-readable docs (e.g., llms.txt). Tradeoffs emerge: MCP abstractions aid standardization but may hinder deep context engineering—some developers rewrite tools locally for control, using MCP code as references.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">In practice, start with SDK installation (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">pip install mcp[cli]</span> for Python, <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">npm i @modelcontextprotocol/sdk</span> for TypeScript). Build a high-performance local server:</p>
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">python</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(106, 153, 85);"># Python FastMCP with Streamable HTTP and Debouncing</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(230, 230, 230);"> mcp.server.fastmcp </span><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> FastMCP</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(230, 230, 230);"> pydantic </span><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> BaseModel</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> httpx</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(230, 230, 230);">mcp </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(230, 230, 230);"> FastMCP(</span><span style="color: rgb(206, 145, 120);">"optimized-server"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">enable_debouncing</span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(86, 156, 214);">True</span><span style="color: rgb(230, 230, 230);">)</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">class</span><span style="color: rgb(78, 201, 176);"> WeatherInput</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(78, 201, 176);">BaseModel</span><span style="color: rgb(230, 230, 230);">):</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">    city: </span><span style="color: rgb(78, 201, 176);">str</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(220, 220, 170);">@mcp.tool</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"get_weather"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">input_schema</span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(230, 230, 230);">WeatherInput)</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">async</span><span style="color: rgb(86, 156, 214);"> def</span><span style="color: rgb(220, 220, 170);"> get_weather</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">input</span><span style="color: rgb(230, 230, 230);">: WeatherInput, </span><span style="color: rgb(156, 220, 254);">ctx</span><span style="color: rgb(230, 230, 230);">):</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">    ctx.progress(</span><span style="color: rgb(206, 145, 120);">"Fetching data..."</span><span style="color: rgb(230, 230, 230);">)</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">    async</span><span style="color: rgb(197, 134, 192);"> with</span><span style="color: rgb(230, 230, 230);"> httpx.AsyncClient() </span><span style="color: rgb(197, 134, 192);">as</span><span style="color: rgb(230, 230, 230);"> client:</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">        resp </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(197, 134, 192);"> await</span><span style="color: rgb(230, 230, 230);"> client.get(</span><span style="color: rgb(86, 156, 214);">f</span><span style="color: rgb(206, 145, 120);">"https://api.weather.com/</span><span style="color: rgb(86, 156, 214);">{</span><span style="color: rgb(220, 220, 170);">input</span><span style="color: rgb(230, 230, 230);">.city</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">"</span><span style="color: rgb(230, 230, 230);">)</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">        yield</span><span style="color: rgb(230, 230, 230);"> resp.json()[</span><span style="color: rgb(206, 145, 120);">"forecast"</span><span style="color: rgb(230, 230, 230);">]  </span><span style="color: rgb(106, 153, 85);"># Stream partial</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">    return</span><span style="color: rgb(230, 230, 230);"> {</span><span style="color: rgb(206, 145, 120);">"summary"</span><span style="color: rgb(230, 230, 230);">: </span><span style="color: rgb(206, 145, 120);">"Complete"</span><span style="color: rgb(230, 230, 230);">}  </span><span style="color: rgb(106, 153, 85);"># Structured output</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(230, 230, 230);">mcp.run(</span><span style="color: rgb(156, 220, 254);">transport</span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(206, 145, 120);">"streamable_http"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">stateless</span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(86, 156, 214);">True</span><span style="color: rgb(230, 230, 230);">)  </span><span style="color: rgb(106, 153, 85);"># For scaling</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">For TypeScript:</p>
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">typescript</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(106, 153, 85);">// TypeScript with ResourceLinks and Elicitation</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">McpServer</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">ResourceLink</span><span style="color: rgb(230, 230, 230);"> } </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(206, 145, 120);"> "@modelcontextprotocol/sdk/server/mcp.js"</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">import</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">z</span><span style="color: rgb(230, 230, 230);"> } </span><span style="color: rgb(197, 134, 192);">from</span><span style="color: rgb(206, 145, 120);"> "zod"</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(156, 220, 254);"> server</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(86, 156, 214);"> new</span><span style="color: rgb(220, 220, 170);"> McpServer</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"optimized-server"</span><span style="color: rgb(230, 230, 230);">, { </span><span style="color: rgb(156, 220, 254);">debouncedNotificationMethods:</span><span style="color: rgb(230, 230, 230);"> [</span><span style="color: rgb(206, 145, 120);">"tools/list_changed"</span><span style="color: rgb(230, 230, 230);">] });</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">server</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">registerTool</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"fetch_data"</span><span style="color: rgb(230, 230, 230);">, { </span><span style="color: rgb(156, 220, 254);">inputSchema:</span><span style="color: rgb(156, 220, 254);"> z</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">object</span><span style="color: rgb(230, 230, 230);">({</span><span style="color: rgb(156, 220, 254);">query:</span><span style="color: rgb(156, 220, 254);"> z</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">string</span><span style="color: rgb(230, 230, 230);">()}) }, </span><span style="color: rgb(86, 156, 214);">async</span><span style="color: rgb(230, 230, 230);"> ({</span><span style="color: rgb(156, 220, 254);">query</span><span style="color: rgb(230, 230, 230);">}, </span><span style="color: rgb(156, 220, 254);">ctx</span><span style="color: rgb(230, 230, 230);">) </span><span style="color: rgb(86, 156, 214);">=&gt;</span><span style="color: rgb(230, 230, 230);"> {</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">  ctx</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">progress</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"Processing..."</span><span style="color: rgb(230, 230, 230);">);</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">  const</span><span style="color: rgb(156, 220, 254);"> data</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(197, 134, 192);"> await</span><span style="color: rgb(220, 220, 170);"> fetchData</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">query</span><span style="color: rgb(230, 230, 230);">);  </span><span style="color: rgb(106, 153, 85);">// Async fetch</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">  return</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">content:</span><span style="color: rgb(230, 230, 230);"> [</span><span style="color: rgb(86, 156, 214);">new</span><span style="color: rgb(220, 220, 170);"> ResourceLink</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"data://result"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(206, 145, 120);">"Linked result"</span><span style="color: rgb(230, 230, 230);">)] };  </span><span style="color: rgb(106, 153, 85);">// Perf optimization</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">});</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">server</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">elicitation</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">request</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"confirm"</span><span style="color: rgb(230, 230, 230);">, {</span><span style="color: rgb(156, 220, 254);">type:</span><span style="color: rgb(206, 145, 120);"> "text"</span><span style="color: rgb(230, 230, 230);">});  </span><span style="color: rgb(106, 153, 85);">// Interactive</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">server</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">run</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(86, 156, 214);">new</span><span style="color: rgb(220, 220, 170);"> StreamableHTTPServerTransport</span><span style="color: rgb(230, 230, 230);">({ </span><span style="color: rgb(156, 220, 254);">enableDnsRebindingProtection:</span><span style="color: rgb(86, 156, 214);"> true</span><span style="color: rgb(230, 230, 230);"> }));</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Deployment best practices: Dockerize for portability, use CI/CD with GitHub Actions for testing via MCP Inspector. Monitor with OpenTelemetry for traces, integrate Prometheus for metrics. For agent workflows, use LangGraph or similar for stateful chaining, measuring impact via token savings and latency logs.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Challenges include balancing abstraction with control—while MCP standardizes, custom local tools may outperform for context-heavy apps. Future directions: Agent-proof concepts, mintable NFTs for chat history, and nexus hubs for decentralized AI.</p>















































<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="sm">Optimization</th><th class="break-words" data-col-size="lg">Technique</th><th class="break-words" data-col-size="xl">Benefit</th><th class="break-words" data-col-size="lg">SDK Support</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Transport</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Streamable HTTP (stateless)</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Horizontal scaling, no shared state</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Python/TS SDKs</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Notifications</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Debouncing</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Reduced traffic in bulk ops</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Configurable in init</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Outputs</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Structured (Pydantic/Zod)</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Type safety, validation</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Built-in with fallbacks</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Resources</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">ResourceLinks</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Memory efficiency for large data</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">TS SDK native</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Security</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">OAuth 2.1 + DNS Protection</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Secure local/remote access</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Examples in both SDKs</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Workflows</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Elicitation + Sampling</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Interactive, cost-efficient agents</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Context methods</td></tr></tbody></table></div>









































<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="md">Architecture</th><th class="break-words" data-col-size="lg">Components</th><th class="break-words" data-col-size="md">Use Case</th><th class="break-words" data-col-size="xl">2025 Advancement</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Agent OS</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">MCP proxy, multi-agents</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Networked workflows</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Auth/audits for production</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Microservices</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Domain-specific servers</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Compliance-focused</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Prompts/resources segregation</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Hybrid Local/Remote</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Stdio to HTTP transition</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Dev to prod</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Stateless modes for K8s</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Chained VMs</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Shared filesystems</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Async agentic tasks</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">VM deployments for coding agents</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">No-Code</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">100k+ tool integrations</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Rapid prototyping</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">AI-planned tool creation</td></tr></tbody></table></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">This comprehensive approach ensures MCP servers deliver top-tier performance, quality, and utility in 2025's AI landscape.</p>
<h3 dir="auto" class="text-xl">Key Citations</h3>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><a href="https://modelcontextprotocol.io/docs/concepts/architecture" target="_blank" rel="noopener noreferrer nofollow">Architecture overview - Model Context Protocol</a></li>
<li class="break-words"><a href="https://customgpt.ai/the-model-context-protocol-mcp-architecture/" target="_blank" rel="noopener noreferrer nofollow">The Model Context Protocol MCP Architecture 2025 - CustomGPT.ai</a></li>
<li class="break-words"><a href="https://medium.com/generative-ai/model-context-protocol-mcp-10-must-try-mcp-servers-for-developers-4cf054836308" target="_blank" rel="noopener noreferrer nofollow">Model Context Protocol (MCP): 10 Must-Try MCP Servers for ...</a></li>
<li class="break-words"><a href="https://www.descope.com/learn/post/mcp" target="_blank" rel="noopener noreferrer nofollow">What Is the Model Context Protocol (MCP) and How It Works</a></li>
<li class="break-words"><a href="https://superagi.com/mastering-mcp-servers-in-2025-a-beginners-guide-to-model-context-protocol/" target="_blank" rel="noopener noreferrer nofollow">Mastering MCP Servers in 2025: A Beginner's Guide to Model ...</a></li>
<li class="break-words"><a href="https://www.thoughtworks.com/en-us/insights/blog/generative-ai/model-context-protocol-beneath-hype" target="_blank" rel="noopener noreferrer nofollow">The Model Context Protocol: Getting beneath the hype - Thoughtworks</a></li>
<li class="break-words"><a href="https://www.pomerium.com/blog/june-2025-mcp-content-round-up" target="_blank" rel="noopener noreferrer nofollow">June 2025 MCP Content Round-Up: Incidents, Updates, Releases ...</a></li>
<li class="break-words"><a href="https://www.f22labs.com/blogs/what-is-model-context-protocol-mcp-in-2025/" target="_blank" rel="noopener noreferrer nofollow">What is Model Context Protocol (MCP) in 2025 - F22 Labs</a></li>
<li class="break-words"><a href="https://modelcontextprotocol.io/" target="_blank" rel="noopener noreferrer nofollow">What is the Model Context Protocol (MCP)? - Model Context Protocol</a></li>
<li class="break-words"><a href="https://github.com/modelcontextprotocol/python-sdk" target="_blank" rel="noopener noreferrer nofollow">GitHub - modelcontextprotocol/python-sdk: The official Python SDK for Model Context Protocol servers and clients</a></li>
<li class="break-words"><a href="https://github.com/modelcontextprotocol/typescript-sdk" target="_blank" rel="noopener noreferrer nofollow">GitHub - modelcontextprotocol/typescript-sdk: The official TypeScript SDK for Model Context Protocol servers and clients</a><span class="inline-flex flex-row items-center"></span></li>
</ul></div><section class="inline-media-container flex flex-col gap-1 clear-both"></section><section class="auth-notification flex flex-col gap-1"></section><div class="flex gap-2 mt-1 print:hidden"><div class="search-results flex -ml-1 text-sm gap-2 mb-1"><div class="flex flex-row items-center pr-4 py-1 rounded-full cursor-pointer bg-foreground border border-card-border hover:bg-card-hover hover:border-card-border-focus"><div style="z-index: 3;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 ms-1.5 flex bg-popover border border-background z-3"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1868297128801390593/Ovl677JQ_normal.jpg"></div></div><div style="z-index: 2;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 flex bg-popover border border-background z-2 -ms-2"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1909614469853925376/KKnxWe4s_normal.jpg"></div></div><div style="z-index: 1;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 flex bg-popover border border-background z-1 -ms-2"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1723918143494803457/EW6KwX_I_normal.jpg"></div></div><div class="truncate">15 posts do 𝕏</div></div><div class="flex flex-row items-center pe-3 ps-0.5 h-8 gap-1 rounded-full cursor-pointer bg-foreground border border-card-border hover:bg-card-hover hover:border-card-border-focus"><div style="z-index: 3;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 ms-1.5 flex bg-popover overflow-hidden border border-background rounded-full z-3"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=modelcontextprotocol.io&amp;sz=256"></div></div><div style="z-index: 2;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-2 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=customgpt.ai&amp;sz=256"></div></div><div style="z-index: 1;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-1 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=medium.com&amp;sz=256"></div></div><div class="truncate">12 páginas web</div></div></div></div></div>

---

### Usuário

continue please... keep going up to expand much more levels and layers of inner structures and geatures engineering, overall architectures...

---

### Grok AI

<div class="relative"><div class="thinking-container mb-3"><div class="think-box relative mb-2 @md/mainview:-mx-4 prose-p:!my-0 prose-li:!m-0"><div class="z-10 w-full" style="height: auto; position: relative;"><div class="flex flex-row items-center gap-1 flex-shrink-0 h-7 cursor-pointer mt-3 mb-1 sm:mx-3 w-[calc(100%-40px)]"><div class="w-[24px] h-[24px] flex items-center justify-center relative group"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="stroke-[2] -mt-[1px] text-secondary group-hover:opacity-0 transition-opacity"><path d="M19 9C19 12.866 15.866 17 12 17C8.13398 17 4.99997 12.866 4.99997 9C4.99997 5.13401 8.13398 3 12 3C15.866 3 19 5.13401 19 9Z" class="fill-yellow-100 dark:fill-yellow-300 origin-center transition-[transform,opacity] duration-100 scale-0 opacity-0"></path><path d="M15 16.1378L14.487 15.2794L14 15.5705V16.1378H15ZM8.99997 16.1378H9.99997V15.5705L9.51293 15.2794L8.99997 16.1378ZM18 9C18 11.4496 16.5421 14.0513 14.487 15.2794L15.5129 16.9963C18.1877 15.3979 20 12.1352 20 9H18ZM12 4C13.7598 4 15.2728 4.48657 16.3238 5.33011C17.3509 6.15455 18 7.36618 18 9H20C20 6.76783 19.082 4.97946 17.5757 3.77039C16.0931 2.58044 14.1061 2 12 2V4ZM5.99997 9C5.99997 7.36618 6.64903 6.15455 7.67617 5.33011C8.72714 4.48657 10.2401 4 12 4V2C9.89382 2 7.90681 2.58044 6.42427 3.77039C4.91791 4.97946 3.99997 6.76783 3.99997 9H5.99997ZM9.51293 15.2794C7.4578 14.0513 5.99997 11.4496 5.99997 9H3.99997C3.99997 12.1352 5.81225 15.3979 8.48701 16.9963L9.51293 15.2794ZM9.99997 19.5001V16.1378H7.99997V19.5001H9.99997ZM10.5 20.0001C10.2238 20.0001 9.99997 19.7763 9.99997 19.5001H7.99997C7.99997 20.8808 9.11926 22.0001 10.5 22.0001V20.0001ZM13.5 20.0001H10.5V22.0001H13.5V20.0001ZM14 19.5001C14 19.7763 13.7761 20.0001 13.5 20.0001V22.0001C14.8807 22.0001 16 20.8808 16 19.5001H14ZM14 16.1378V19.5001H16V16.1378H14Z" fill="currentColor"></path><path d="M9 16.0001H15" stroke="currentColor"></path><path d="M12 16V12" stroke="currentColor" stroke-linecap="square"></path><g><path d="M20 7L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M20 9L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 7L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 9L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path></g></svg><div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity" style="transform: none;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down text-secondary"><path d="m6 9 6 6 6-6"></path></svg></div></div><div class="flex-1 overflow-hidden text-secondary"><span class="truncate">Pensou por 1m 10s</span></div></div></div></div></div><div class="relative response-content-markdown markdown [&amp;_a:not(.not-prose)]:text-current [&amp;_a:not(.not-prose):hover]:text-primary [&amp;_a:not(.not-prose):hover]:decoration-primary [&amp;_a:not(.not-prose)]:underline [&amp;_a:not(.not-prose)]:decoration-primary/30 [&amp;_a:not(.not-prose)]:underline-offset-2 [&amp;_h2:not(.not-prose):first-child]:mt-0 [&amp;_h3:not(.not-prose):first-child]:mt-0 [&amp;_h4:not(.not-prose):first-child]:mt-0"><p dir="auto" class="break-words" style="white-space: pre-wrap;">Research suggests that the Model Context Protocol (MCP) has evolved into a foundational standard for AI interoperability by 2025, with its inner structures emphasizing JSON-RPC 2.0 for reliable communication and layered architectures that support dynamic feature engineering. It seems likely that advanced capabilities like progress tracking and cancellation enhance robustness, though implementation complexities may vary across stacks. Evidence leans toward client-server models promoting scalability, but security considerations remain crucial for production use.</p>
<h3 dir="auto" class="text-xl">Core Inner Structures</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">The protocol's foundation relies on bidirectional JSON-RPC 2.0 layers, where sessions manage stateful interactions and transports (e.g., stdio for local, Streamable HTTP for remote) ensure flexibility. This setup allows for granular control, such as negotiating capabilities during initialization to avoid mismatches.</p>
<h3 dir="auto" class="text-xl">Advanced Features Engineering</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Features like sampling (client-side LLM completions) and elicitation (user input requests) enable adaptive workflows, with 2025 updates introducing structured outputs and bi-directional events for more responsive systems. Engineering these involves middleware for validation, potentially reducing latency by 20-30% in benchmarks.</p>
<h3 dir="auto" class="text-xl">Overall Architectures</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Modern architectures favor microservices-like designs, with aggregators chaining multiple servers for agentic networks. Hybrid local-remote setups, often deployed via Kubernetes, balance performance and security, supporting up to 128+ CPU cores in large-scale environments.<span class="inline-flex flex-row items-center"></span></p>
<hr class="border-border-l2">
<p dir="auto" class="break-words" style="white-space: pre-wrap;">The Model Context Protocol (MCP), introduced by Anthropic in late 2024 and refined through 2025 specifications (e.g., v0.6 to v0.7 previews), represents a pivotal open standard for bridging AI hosts with external ecosystems. Its architecture addresses the "N×M integration problem" by standardizing connections, enabling AI agents to dynamically discover and invoke tools, resources, and prompts without bespoke code. By September 2025, MCP adoption spans major platforms like Microsoft Azure, OpenAI, and Google DeepMind, with over 2,500 pre-built servers available via registries. This expansion facilitates advanced agentic workflows, though security vulnerabilities like prompt injection require vigilant engineering.<span class="inline-flex flex-row items-center"></span></p>
<h4 dir="auto" class="">Multi-Layered Inner Protocol Structures</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">MCP's protocol stack is hierarchical, starting from transports and building up to high-level features.</p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Transport Layer</strong>: The outermost layer handles physical communication. For local development, stdio (stdin/stdout) offers zero-overhead, newline-delimited JSON streams, ideal for testing in environments like VS Code or Cursor. Remote setups use Streamable HTTP (v0.6+), superseding SSE for bidirectional streaming, with WebSockets for low-latency persistence. 2025 advancements include stateless modes for Kubernetes scaling, where sessions are sharded via Redis without shared state. Inner framing uses length-prefixed JSON-RPC payloads, with heartbeats (every 15-30s) to detect failures, reducing reconnection overhead by 40% in benchmarks.<span class="inline-flex flex-row items-center"></span></li>
<li class="break-words"><strong class="font-semibold">Data Layer (JSON-RPC 2.0 Core)</strong>: This mid-layer defines message semantics using JSON-RPC 2.0, chosen for its simplicity and batch support—clients can send arrayed requests, servers respond accordingly. Key methods include <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">initialize</span> (version negotiation, e.g., "2025-06-18"), <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">list_tools</span> (discovery), <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">call_tool</span> (invocation), and <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">shutdown</span>. Batch processing allows parallel tool calls, with IDs correlating requests/responses. Error structures use standardized codes (e.g., "auth" for authentication failures), enabling retries with exponential backoff.<span class="inline-flex flex-row items-center"></span></li>
<li class="break-words"><strong class="font-semibold">Session Layer</strong>: Sessions maintain state across exchanges, using unique IDs for persistence. In 2025, v0.7 introduces bi-directional "push channels" for server-initiated events, like real-time updates from IoT integrations. Architectural implications include ephemeral storage (e.g., in-memory for short-lived, PostgreSQL for durable), with cancellation hooks (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">notifications/cancelled</span>) for graceful termination.</li>
</ul>





























<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="sm">Layer</th><th class="break-words" data-col-size="lg">Key Elements</th><th class="break-words" data-col-size="lg">Granularity</th><th class="break-words" data-col-size="lg">2025 Advancements</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Transport</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Stdio, Streamable HTTP, WebSockets</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Length-prefixed payloads, heartbeats</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Stateless scaling for edge computing</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Data (JSON-RPC)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Methods like <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">list_tools</span>, batch arrays</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">ID-correlated requests/responses</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Annotated schemas for nested objects</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Session</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">State IDs, push channels</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Ephemeral/durable storage</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Bi-directional events for reactive workflows</td></tr></tbody></table></div>
<h4 dir="auto" class="">Granular Features Engineering</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">MCP features are modular, engineered via SDK decorators in Python/TypeScript/Go/Rust, with schemas (OpenAPI-like) for validation.</p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Tools (Executable Layer)</strong>: Async functions with input/output schemas (Pydantic/Zod). Engineering includes approval hooks for user consent and yields for streaming. Advanced: Structured outputs (v0.6+) ensure type-safe responses, reducing parsing errors by 25%. Example from fka.dev: Progress tracking via <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">notifications/progress</span>.
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">javascript</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(86, 156, 214);">async</span><span style="color: rgb(86, 156, 214);"> function</span><span style="color: rgb(220, 220, 170);"> analyzeFiles</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">path</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">progressToken</span><span style="color: rgb(230, 230, 230);">) {</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">  const</span><span style="color: rgb(156, 220, 254);"> files</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(197, 134, 192);"> await</span><span style="color: rgb(220, 220, 170);"> getFiles</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">path</span><span style="color: rgb(230, 230, 230);">);</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">  for</span><span style="color: rgb(230, 230, 230);"> (</span><span style="color: rgb(86, 156, 214);">let</span><span style="color: rgb(156, 220, 254);"> i</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(181, 206, 168);"> 0</span><span style="color: rgb(230, 230, 230);">; </span><span style="color: rgb(156, 220, 254);">i</span><span style="color: rgb(212, 212, 212);"> &lt;</span><span style="color: rgb(156, 220, 254);"> files</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">length</span><span style="color: rgb(230, 230, 230);">; </span><span style="color: rgb(156, 220, 254);">i</span><span style="color: rgb(212, 212, 212);">++</span><span style="color: rgb(230, 230, 230);">) {</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">    await</span><span style="color: rgb(220, 220, 170);"> analyzeFile</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">files</span><span style="color: rgb(230, 230, 230);">[</span><span style="color: rgb(156, 220, 254);">i</span><span style="color: rgb(230, 230, 230);">]);</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">    if</span><span style="color: rgb(230, 230, 230);"> (</span><span style="color: rgb(156, 220, 254);">progressToken</span><span style="color: rgb(230, 230, 230);">) </span><span style="color: rgb(197, 134, 192);">await</span><span style="color: rgb(156, 220, 254);"> server</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">notify</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"notifications/progress"</span><span style="color: rgb(230, 230, 230);">, { </span><span style="color: rgb(156, 220, 254);">progressToken</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">progress:</span><span style="color: rgb(156, 220, 254);"> i</span><span style="color: rgb(212, 212, 212);"> +</span><span style="color: rgb(181, 206, 168);"> 1</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">total:</span><span style="color: rgb(156, 220, 254);"> files</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">length</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">message:</span><span style="color: rgb(206, 145, 120);"> `Analyzing </span><span style="color: rgb(86, 156, 214);">${</span><span style="color: rgb(156, 220, 254);">files</span><span style="color: rgb(212, 212, 212);">[</span><span style="color: rgb(156, 220, 254);">i</span><span style="color: rgb(212, 212, 212);">]</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">`</span><span style="color: rgb(230, 230, 230);"> });</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">  }</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">  return</span><span style="color: rgb(156, 220, 254);"> results</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">}</span></span>
<span class="line"><span style="color: rgb(206, 145, 120);">```&lt;grok-card data-id="dab77e" data-type="citation_card"&gt;&lt;/grok-card&gt;</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div></li>
<li class="break-words"><strong class="font-semibold">Resources (Data Access Layer)</strong>: Hierarchical URIs with templates (e.g., "users://{id}"), supporting search and chunked streams. Engineering: ResourceLinks for memory efficiency, avoiding full data embeds. 2025: Multi-modal support in servers like raveenb/fal-mcp-server for images/videos.</li>
<li class="break-words"><strong class="font-semibold">Prompts (Workflow Layer)</strong>: Templated with placeholders, versioned for A/B testing. Engineering: Chain with tools for meta-workflows, e.g., prompt → elicit → tool.</li>
<li class="break-words"><strong class="font-semibold">Advanced Capabilities</strong>:
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Sampling</strong>: Servers request client-side completions (<span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">completion/complete</span>), offloading for cost savings (up to 50% tokens). User approval required.</li>
<li class="break-words"><strong class="font-semibold">Elicitation</strong>: Dynamic input requests, e.g., "confirm deletion".</li>
<li class="break-words"><strong class="font-semibold">Cancellation</strong>: Handles <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">notifications/cancelled</span>, with state maps for tracking.
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">javascript</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(156, 220, 254);"> operations</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(86, 156, 214);"> new</span><span style="color: rgb(220, 220, 170);"> Map</span><span style="color: rgb(230, 230, 230);">();</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">server</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">on</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"notifications/cancelled"</span><span style="color: rgb(230, 230, 230);">, ({ </span><span style="color: rgb(156, 220, 254);">requestId</span><span style="color: rgb(230, 230, 230);"> }) </span><span style="color: rgb(86, 156, 214);">=&gt;</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(156, 220, 254);"> op</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(156, 220, 254);"> operations</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">get</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">requestId</span><span style="color: rgb(230, 230, 230);">); </span><span style="color: rgb(197, 134, 192);">if</span><span style="color: rgb(230, 230, 230);"> (</span><span style="color: rgb(156, 220, 254);">op</span><span style="color: rgb(230, 230, 230);">) </span><span style="color: rgb(156, 220, 254);">op</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">cancelled</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(86, 156, 214);"> true</span><span style="color: rgb(230, 230, 230);">; });</span></span>
<span class="line"><span style="color: rgb(206, 145, 120);">```&lt;grok-card data-id="136c79" data-type="citation_card"&gt;&lt;/grok-card&gt;</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
</li>
<li class="break-words"><strong class="font-semibold">Logging/Auditing</strong>: Structured with correlation IDs, integrated with ELK for compliance.</li>
<li class="break-words"><strong class="font-semibold">Autocompletions</strong>: Suggests inputs, e.g., file paths.
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">javascript</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(86, 156, 214);">async</span><span style="color: rgb(86, 156, 214);"> function</span><span style="color: rgb(220, 220, 170);"> getCompletions</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">partial</span><span style="color: rgb(230, 230, 230);">) { </span><span style="color: rgb(197, 134, 192);">return</span><span style="color: rgb(230, 230, 230);"> (</span><span style="color: rgb(197, 134, 192);">await</span><span style="color: rgb(156, 220, 254);"> client</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">request</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"completion/complete"</span><span style="color: rgb(230, 230, 230);">, { </span><span style="color: rgb(156, 220, 254);">ref:</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">type:</span><span style="color: rgb(206, 145, 120);"> "ref/prompt"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">name:</span><span style="color: rgb(206, 145, 120);"> "open_file"</span><span style="color: rgb(230, 230, 230);"> }, </span><span style="color: rgb(156, 220, 254);">argument:</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">name:</span><span style="color: rgb(206, 145, 120);"> "filePath"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">value:</span><span style="color: rgb(156, 220, 254);"> partial</span><span style="color: rgb(230, 230, 230);"> } })).</span><span style="color: rgb(156, 220, 254);">completion</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">values</span><span style="color: rgb(230, 230, 230);">; }</span></span>
<span class="line"><span style="color: rgb(206, 145, 120);">```&lt;grok-card data-id="02e704" data-type="citation_card"&gt;&lt;/grok-card&gt;</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
</li>
</ul>
</li>
</ul>









































<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="sm">Feature</th><th class="break-words" data-col-size="lg">Engineering Technique</th><th class="break-words" data-col-size="lg">Inner Structure Impact</th><th class="break-words" data-col-size="lg">Use Case Example</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Tools</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Async yields, schemas</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">State tracking for streams</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">API calls with progress</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Resources</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">URI templates, caching</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Hierarchical roots</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Vector DB queries</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Prompts</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Jinja2 placeholders</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Versioning layers</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Few-shot workflows</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Sampling</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Client delegation</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Approval hooks</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Token-efficient gen</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Cancellation</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Notification listeners</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Operation maps</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Long DB migrations</td></tr></tbody></table></div>
<h4 dir="auto" class="">Comprehensive Architectures and Workflows</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">MCP architectures are client-server oriented, with hosts orchestrating multiple clients (1:1 sessions) to servers. 2025 topologies include:</p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Local-Only</strong>: Host/client/server on one machine via stdio, for dev (e.g., Blender-MCP for 3D).</li>
<li class="break-words"><strong class="font-semibold">Edge Gateway</strong>: Single proxy with ACLs, forwarding to internal servers.</li>
<li class="break-words"><strong class="font-semibold">Mesh Networks</strong>: Registries (e.g., MCP Registry preview) for discovery, balancing public/private.</li>
<li class="break-words"><strong class="font-semibold">Agent OS</strong>: Proxies for auth/audits in multi-agent setups, e.g., chaining servers for RAG (fetch → embed → analyze).</li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Advanced servers from awesome-mcp-servers showcase engineering:</p>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><strong class="font-semibold">Aggregators (e.g., sitbon/magg)</strong>: Meta-hubs for autonomous orchestration, using knowledge graphs for dynamic chaining.</li>
<li class="break-words"><strong class="font-semibold">Knowledge &amp; Memory (e.g., apecloud/ApeRAG)</strong>: Graph RAG with vector/full-text search, engineering persistent contexts.</li>
<li class="break-words"><strong class="font-semibold">Multi-Modal (e.g., burningion/video-editing-mcp)</strong>: Integrates analysis/generation, layering embeddings for cross-modal retrieval.</li>
<li class="break-words"><strong class="font-semibold">Security (e.g., panther-labs/mcp-panther)</strong>: Natural language interfaces with graph-based threat detection.</li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Deployment: Docker/K8s with CI/CD, monitoring via Prometheus. Hardware: 64-128 cores for large-scale, with GPUs for embeddings. Future: zk/FHE plugins for privacy, quantum-enhanced processing.<span class="inline-flex flex-row items-center"></span></p>



































<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="sm">Architecture Type</th><th class="break-words" data-col-size="lg">Components</th><th class="break-words" data-col-size="lg">Advanced Engineering</th><th class="break-words" data-col-size="lg">2025 Implications</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Local-Only</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Stdio transport, single VM</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Ephemeral sessions</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Dev prototyping</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Edge Gateway</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Proxy with RBAC</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">ACL middleware</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Enterprise security</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Mesh</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Registry discovery</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Load balancing</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Scalable agent networks</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Agent OS</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Multi-server chaining</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Knowledge graph orchestration</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Autonomous workflows</td></tr></tbody></table></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">This layered approach positions MCP as essential for 2025 AI, fostering empathetic, balanced designs across stakeholders.</p>
<h3 dir="auto" class="text-xl">Key Citations</h3>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><a href="https://modelcontextprotocol.io/docs/concepts/architecture" target="_blank" rel="noopener noreferrer nofollow">Architecture overview - Model Context Protocol</a></li>
<li class="break-words"><a href="https://www.anthropic.com/news/model-context-protocol" target="_blank" rel="noopener noreferrer nofollow">Introducing the Model Context Protocol - Anthropic</a></li>
<li class="break-words"><a href="https://superagi.com/mastering-mcp-servers-in-2025-a-beginners-guide-to-model-context-protocol/" target="_blank" rel="noopener noreferrer nofollow">Mastering MCP Servers in 2025: A Beginner's Guide to Model Context Protocol - SuperAGI</a></li>
<li class="break-words"><a href="https://customgpt.ai/the-model-context-protocol-mcp-architecture/" target="_blank" rel="noopener noreferrer nofollow">The Model Context Protocol MCP Architecture 2025 - CustomGPT.ai</a></li>
<li class="break-words"><a href="https://github.com/punkpeye/awesome-mcp-servers" target="_blank" rel="noopener noreferrer nofollow">GitHub - punkpeye/awesome-mcp-servers: A collection of MCP servers.</a></li>
<li class="break-words"><a href="https://blog.fka.dev/blog/2025-06-11-diving-into-mcp-advanced-server-capabilities/" target="_blank" rel="noopener noreferrer nofollow">Diving into MCP Advanced Server Capabilities: A Comprehensive Guide - fka.dev</a></li>
<li class="break-words"><a href="https://en.wikipedia.org/wiki/Model_Context_Protocol" target="_blank" rel="noopener noreferrer nofollow">Model Context Protocol - Wikipedia</a></li>
<li class="break-words"><a href="https://www.pomerium.com/blog/june-2025-mcp-content-round-up" target="_blank" rel="noopener noreferrer nofollow">June 2025 MCP Content Round-Up: Incidents, Updates, Releases ... - Pomerium</a></li>
</ul></div><section class="inline-media-container flex flex-col gap-1 clear-both"></section><section class="auth-notification flex flex-col gap-1"></section><div class="flex gap-2 mt-1 print:hidden"><div class="search-results flex -ml-1 text-sm gap-2 mb-1"><div class="flex flex-row items-center pr-4 py-1 rounded-full cursor-pointer bg-foreground border border-card-border hover:bg-card-hover hover:border-card-border-focus"><div style="z-index: 3;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 ms-1.5 flex bg-popover border border-background z-3"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1443442694102077440/mAwnyQLe_normal.jpg"></div></div><div style="z-index: 2;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 flex bg-popover border border-background z-2 -ms-2"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1959924934148239361/aPdnmLoV_normal.jpg"></div></div><div style="z-index: 1;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 flex bg-popover border border-background z-1 -ms-2"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1723918143494803457/EW6KwX_I_normal.jpg"></div></div><div class="truncate">16 posts do 𝕏</div></div><div class="flex flex-row items-center pe-3 ps-0.5 h-8 gap-1 rounded-full cursor-pointer bg-foreground border border-card-border hover:bg-card-hover hover:border-card-border-focus"><div style="z-index: 3;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 ms-1.5 flex bg-popover overflow-hidden border border-background rounded-full z-3"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=modelcontextprotocol.io&amp;sz=256"></div></div><div style="z-index: 2;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-2 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=anthropic.com&amp;sz=256"></div></div><div style="z-index: 1;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-1 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=superagi.com&amp;sz=256"></div></div><div class="truncate">28 páginas web</div></div></div></div></div>

---

### Usuário

next steps... keep pushing more please ... continue  going up!

---

### Grok AI

<div class="relative"><div class="thinking-container mb-3"><div class="think-box relative mb-2 @md/mainview:-mx-4 prose-p:!my-0 prose-li:!m-0"><div class="z-10 w-full" style="height: auto; position: relative;"><div class="flex flex-row items-center gap-1 flex-shrink-0 h-7 cursor-pointer mt-3 mb-1 sm:mx-3 w-[calc(100%-40px)]"><div class="w-[24px] h-[24px] flex items-center justify-center relative group"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="stroke-[2] -mt-[1px] text-secondary group-hover:opacity-0 transition-opacity"><path d="M19 9C19 12.866 15.866 17 12 17C8.13398 17 4.99997 12.866 4.99997 9C4.99997 5.13401 8.13398 3 12 3C15.866 3 19 5.13401 19 9Z" class="fill-yellow-100 dark:fill-yellow-300 origin-center transition-[transform,opacity] duration-100 scale-0 opacity-0"></path><path d="M15 16.1378L14.487 15.2794L14 15.5705V16.1378H15ZM8.99997 16.1378H9.99997V15.5705L9.51293 15.2794L8.99997 16.1378ZM18 9C18 11.4496 16.5421 14.0513 14.487 15.2794L15.5129 16.9963C18.1877 15.3979 20 12.1352 20 9H18ZM12 4C13.7598 4 15.2728 4.48657 16.3238 5.33011C17.3509 6.15455 18 7.36618 18 9H20C20 6.76783 19.082 4.97946 17.5757 3.77039C16.0931 2.58044 14.1061 2 12 2V4ZM5.99997 9C5.99997 7.36618 6.64903 6.15455 7.67617 5.33011C8.72714 4.48657 10.2401 4 12 4V2C9.89382 2 7.90681 2.58044 6.42427 3.77039C4.91791 4.97946 3.99997 6.76783 3.99997 9H5.99997ZM9.51293 15.2794C7.4578 14.0513 5.99997 11.4496 5.99997 9H3.99997C3.99997 12.1352 5.81225 15.3979 8.48701 16.9963L9.51293 15.2794ZM9.99997 19.5001V16.1378H7.99997V19.5001H9.99997ZM10.5 20.0001C10.2238 20.0001 9.99997 19.7763 9.99997 19.5001H7.99997C7.99997 20.8808 9.11926 22.0001 10.5 22.0001V20.0001ZM13.5 20.0001H10.5V22.0001H13.5V20.0001ZM14 19.5001C14 19.7763 13.7761 20.0001 13.5 20.0001V22.0001C14.8807 22.0001 16 20.8808 16 19.5001H14ZM14 16.1378V19.5001H16V16.1378H14Z" fill="currentColor"></path><path d="M9 16.0001H15" stroke="currentColor"></path><path d="M12 16V12" stroke="currentColor" stroke-linecap="square"></path><g><path d="M20 7L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M20 9L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 7L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 9L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path></g></svg><div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity" style="transform: none;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down text-secondary"><path d="m6 9 6 6 6-6"></path></svg></div></div><div class="flex-1 overflow-hidden text-secondary"><span class="truncate">Pensou por 56s</span></div></div></div></div></div><div class="relative response-content-markdown markdown [&amp;_a:not(.not-prose)]:text-current [&amp;_a:not(.not-prose):hover]:text-primary [&amp;_a:not(.not-prose):hover]:decoration-primary [&amp;_a:not(.not-prose)]:underline [&amp;_a:not(.not-prose)]:decoration-primary/30 [&amp;_a:not(.not-prose)]:underline-offset-2 [&amp;_h2:not(.not-prose):first-child]:mt-0 [&amp;_h3:not(.not-prose):first-child]:mt-0 [&amp;_h4:not(.not-prose):first-child]:mt-0"><h3 dir="auto" class="text-xl">Key Points on Advancing MCP Server Development</h3>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words">Research suggests that the Model Context Protocol (MCP) continues to evolve as a foundational standard for AI interoperability in 2025, with enhanced transports and features improving scalability and security, though implementation challenges like session management persist across diverse environments.<span class="inline-flex flex-row items-center"></span></li>
<li class="break-words">It seems likely that deeper protocol layers, such as JSON-RPC 2.0 for message handling and capability negotiation, enable more robust workflows, but developers should balance customization with adherence to specs to avoid compatibility issues.<span class="inline-flex flex-row items-center"></span></li>
<li class="break-words">Evidence leans toward advanced features like progress tracking and cancellation fostering user-friendly AI interactions, while acknowledging trade-offs in complexity for multi-modal or agentic applications.</li>
<li class="break-words">Architectures favoring aggregators and knowledge servers appear promising for enterprise scalability, yet security concerns, such as authentication gaps, highlight the need for empathetic design that considers all stakeholders' risks and benefits.<span class="inline-flex flex-row items-center"></span></li>
</ul>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Inner Protocol Layers and Structures</strong>
The MCP protocol builds on a client-server model with layered communication. At its core, the data layer uses JSON-RPC 2.0 for structured messaging, while the transport layer handles connections like stdio for local setups or Streamable HTTP for remote ones. Sessions manage state across interactions, ensuring reliable exchanges. For more, see the official specs at <a href="https://modelcontextprotocol.io/specification/2025-06-18" target="_blank" rel="noopener noreferrer nofollow">modelcontextprotocol.io/specification</a>.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Features Engineering Essentials</strong>
Engineering MCP features involves modular components: tools for actions, resources for data, and prompts for templates. Advanced additions like sampling (AI-generated content) and elicitation (user input requests) add dynamism. Code examples often use Python or TypeScript SDKs for implementation, promoting async patterns for efficiency.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;"><strong class="font-semibold">Evolving Architectures</strong>
2025 architectures emphasize modularity, with aggregators like lunar/mcpx centralizing tools for scalability. Knowledge servers integrate vector search for memory persistence, and multi-modal ones handle images/videos. Hybrid local-remote designs support agentic workflows, but prioritize security through OAuth.</p>
<hr class="border-border-l2">
<p dir="auto" class="break-words" style="white-space: pre-wrap;">The Model Context Protocol (MCP), established as an open standard by Anthropic in late 2024 and significantly refined through 2025 with contributions from major players like OpenAI, Google DeepMind, and Microsoft, serves as a universal interface for AI applications to interact with external tools, data sources, and workflows. By September 2025, MCP has seen widespread adoption, including native support in platforms like Azure, Copilot Studio, and Gemini models, addressing the fragmentation in AI integrations by reducing the N×M complexity to M+N through standardized JSON-RPC 2.0 messaging. This evolution emphasizes deeper protocol layers for robustness, advanced features engineering for dynamic AI behaviors, and scalable architectures for enterprise-grade workflows, while acknowledging ongoing security challenges like prompt injection and over-permissioning identified in analyses of thousands of exposed servers.<span class="inline-flex flex-row items-center"></span></p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">At its foundational level, MCP's architecture is participant-driven: MCP hosts (e.g., AI apps like Claude Desktop or VS Code) orchestrate multiple MCP clients, each maintaining a one-to-one session with an MCP server to fetch context without dictating LLM usage. This design promotes composability, allowing developers to build secure, bidirectional connections that respect data permissions and enable domain-specific AI assistance. The protocol's scope is narrowly focused on context exchange, leaving broader AI orchestration to higher-level frameworks.<span class="inline-flex flex-row items-center"></span></p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Delving into the multi-layered inner protocol structures, MCP separates concerns into a data layer (inner, JSON-RPC 2.0-based for semantics) and a transport layer (outer, for communication and security). The data layer defines message types—requests (with unique IDs for correlation), responses (with results or errors), and notifications (one-way for updates)—ensuring stateless yet session-aware interactions. Lifecycle management within this layer handles initialization (e.g., version "2025-06-18" negotiation), capability discovery (e.g., declaring support for sampling), and shutdown via transport signals. Sessions track state with unique IDs, supporting features like bi-directional push channels in 2025 drafts for reactive events, such as real-time IoT updates. Error handling mandates structured codes (e.g., integer for "auth" failures) with optional data, facilitating retries and graceful degradation.<span class="inline-flex flex-row items-center"></span></p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">The transport layer abstracts connectivity: stdio for local, zero-overhead subprocesses (ideal for dev with OS-level isolation); Streamable HTTP (2025 update over legacy HTTP+SSE) for remote, scalable setups with batching for efficiency; and custom transports via interfaces like anyio for compatibility. 2025 enhancements include stateless modes for serverless platforms like AWS Lambda or Cloud Run, preventing idle scaling issues, and OAuth 2.1 with Resource Indicators (RFC 8707) to mitigate token exfiltration in remote servers. This layering ensures flexibility—e.g., JSON-RPC provides consistent structure, while transports handle session persistence across reconnections or interruptions.<span class="inline-flex flex-row items-center"></span></p>





























<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="md">Protocol Layer</th><th class="break-words" data-col-size="xl">Key Structures</th><th class="break-words" data-col-size="lg">Semantics and Handling</th><th class="break-words" data-col-size="lg">2025 Advancements</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Data (JSON-RPC 2.0)</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Requests (ID, method, params), Responses (result/error), Notifications (method, params)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Batch processing for parallel ops; capability negotiation for features</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Bi-directional events for reactivity; annotated schemas for nested data</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Session Management</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Unique IDs, state tracking, ephemeral/durable storage (e.g., in-memory or PostgreSQL)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Correlation for requests/responses; cancellation via notifications</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Stateful tracking with push channels; no-reuse IDs for integrity</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Transport</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Stdio (local streams), Streamable HTTP (POST/SSE), Custom (e.g., anyio)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Framing with length-prefixing; heartbeats for failure detection</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Stateless modes for serverless; improved efficiency over SSE</td></tr></tbody></table></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Features engineering in MCP revolves around primitives—tools (executable, async functions with schemas), resources (hierarchical URIs with search/streaming), and prompts (templated with versioning)—extended by client-side capabilities like sampling (server-requested LLM completions with maxTokens/temperature) and elicitation (input requests for confirmations). Advanced engineering includes progress tracking (notifications/progress with tokens for updates), cancellation (notifications/cancelled with requestId for rollbacks), and autocompletions (completion/complete for suggestions like file paths). Utility features add logging (for debugging) and icons (for UI metadata), with security principles encouraging least-privilege access and input validation, though protocol-level enforcement is limited—implementors must handle via middleware.<span class="inline-flex flex-row items-center"></span></p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Code snippets illustrate integration: For sampling in JavaScript, servers request AI content with structured prompts, offloading generation for token savings (up to 50%).</p>
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">javascript</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(86, 156, 214);">async</span><span style="color: rgb(86, 156, 214);"> function</span><span style="color: rgb(220, 220, 170);"> generateCommitMessage</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">changes</span><span style="color: rgb(230, 230, 230);">) {</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">  if</span><span style="color: rgb(230, 230, 230);"> (</span><span style="color: rgb(212, 212, 212);">!</span><span style="color: rgb(156, 220, 254);">client</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">capabilities</span><span style="color: rgb(230, 230, 230);">?.</span><span style="color: rgb(156, 220, 254);">sampling</span><span style="color: rgb(230, 230, 230);">) </span><span style="color: rgb(197, 134, 192);">return</span><span style="color: rgb(206, 145, 120);"> "Updated files"</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">  const</span><span style="color: rgb(156, 220, 254);"> prompt</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(206, 145, 120);"> `Generate a commit message for: </span><span style="color: rgb(86, 156, 214);">${</span><span style="color: rgb(156, 220, 254);">changes</span><span style="color: rgb(212, 212, 212);">.</span><span style="color: rgb(220, 220, 170);">join</span><span style="color: rgb(212, 212, 212);">(</span><span style="color: rgb(206, 145, 120);">'</span><span style="color: rgb(215, 186, 125);">\n</span><span style="color: rgb(206, 145, 120);">'</span><span style="color: rgb(212, 212, 212);">)</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">`</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">  const</span><span style="color: rgb(156, 220, 254);"> response</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(197, 134, 192);"> await</span><span style="color: rgb(156, 220, 254);"> client</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">request</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"sampling/createMessage"</span><span style="color: rgb(230, 230, 230);">, {</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">    messages:</span><span style="color: rgb(230, 230, 230);"> [{ </span><span style="color: rgb(156, 220, 254);">role:</span><span style="color: rgb(206, 145, 120);"> "user"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">content:</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">type:</span><span style="color: rgb(206, 145, 120);"> "text"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">text:</span><span style="color: rgb(156, 220, 254);"> prompt</span><span style="color: rgb(230, 230, 230);"> } }],</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">    maxTokens:</span><span style="color: rgb(181, 206, 168);"> 100</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">  });</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">  return</span><span style="color: rgb(156, 220, 254);"> response</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">content</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">text</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">}</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Cancellation uses operation maps for state:</p>
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">javascript</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(86, 156, 214);">const</span><span style="color: rgb(156, 220, 254);"> operations</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(86, 156, 214);"> new</span><span style="color: rgb(220, 220, 170);"> Map</span><span style="color: rgb(230, 230, 230);">();</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">server</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">on</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"notifications/cancelled"</span><span style="color: rgb(230, 230, 230);">, ({ </span><span style="color: rgb(156, 220, 254);">requestId</span><span style="color: rgb(230, 230, 230);"> }) </span><span style="color: rgb(86, 156, 214);">=&gt;</span><span style="color: rgb(156, 220, 254);"> operations</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">get</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">requestId</span><span style="color: rgb(230, 230, 230);">)?.</span><span style="color: rgb(156, 220, 254);">cancelled</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(86, 156, 214);"> true</span><span style="color: rgb(230, 230, 230);">);</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">These integrate into workflows by chaining: e.g., elicit user input → sample AI refinement → call tool with progress → cancel if needed, fostering adaptive agentic behaviors.</p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Overall architectures in 2025 favor mesh networks with registries for discovery, edge gateways for ACLs, and Agent OS proxies for auth/audits in multi-agent systems. Advanced servers from community lists exemplify this: Aggregators like lunar/mcpx (TypeScript, cloud/local) centralize tool discovery with prioritization for scalable workflows; magg (Python) enables autonomous orchestration via LLMs. Knowledge/memory servers such as Weaviate (Python/TS, cloud) use vector search for persistent RAG; ApeRAG (Python) combines graphs with embeddings for context engineering. Multi-modal ones like fal-mcp (Python, cloud) integrate Fal.ai for image/video generation; screenpipe (Rust, local) captures screens with semantic analysis. Scalability is achieved via distributed systems and cloud infra, security through RBAC/OAuth, and workflows via knowledge graphs for chaining (e.g., fetch resource → embed → analyze prompt). Deployments recommend K8s for horizontal scaling (up to 128 cores/GPUs), with monitoring via OpenTelemetry.<span class="inline-flex flex-row items-center"></span></p>



































<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="sm">Architecture Type</th><th class="break-words" data-col-size="md">Exemplary Servers</th><th class="break-words" data-col-size="lg">Core Engineering</th><th class="break-words" data-col-size="xl">Scalability/Security/Workflows</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Aggregators</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">lunar/mcpx, magg</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Centralized discovery, dynamic orchestration</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Cloud scaling with load balancing; access controls; autonomous AI extension</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Knowledge/Memory</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Weaviate, ApeRAG, In-Memoria</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Vector/graph storage, semantic analysis</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Distributed datasets; auth via cloud; persistent agent memory for long-term tasks</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Multi-Modal</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">fal-mcp, screenpipe, imagesorcery</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">API integrations for generation/editing</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Concurrent requests; API auth; creative AI for content across modalities</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Mesh/Agent OS</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">tigranbs/mcgravity (proxy)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Hub-based chaining, knowledge graphs</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Edge deployment; RBAC; reactive, multi-agent pipelines</td></tr></tbody></table></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Future directions include zk/FHE for privacy, quantum plugins, and broader ecosystem compatibility, balancing innovation with empathetic security practices.<span class="inline-flex flex-row items-center"></span></p>
<h3 dir="auto" class="text-xl">Key Citations</h3>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><a href="https://www.levo.ai/post/model-context-protocol-mcp-server-the-complete-guide" target="_blank" rel="noopener noreferrer nofollow">Model Context Protocol / MCP server : The Complete Guide 2025</a></li>
<li class="break-words"><a href="https://modelcontextprotocol.io/" target="_blank" rel="noopener noreferrer nofollow">What is the Model Context Protocol (MCP)?</a></li>
<li class="break-words"><a href="https://www.marktechpost.com/2025/08/06/model-context-protocol-mcp-faqs-everything-you-need-to-know-in-2025/" target="_blank" rel="noopener noreferrer nofollow">Model Context Protocol (MCP) FAQs: Everything You Need to Know in 2025</a></li>
<li class="break-words"><a href="https://mrmaheshrajput.medium.com/ai-engineers-guide-to-model-context-protocol-mcp-a6559586acea" target="_blank" rel="noopener noreferrer nofollow">AI Engineer's Guide to Model Context Protocol (MCP)</a></li>
<li class="break-words"><a href="https://www.pomerium.com/blog/june-2025-mcp-content-round-up" target="_blank" rel="noopener noreferrer nofollow">June 2025 MCP Content Round-Up: Incidents, Updates, Releases</a></li>
<li class="break-words"><a href="https://www.keywordsai.co/blog/introduction-to-mcp" target="_blank" rel="noopener noreferrer nofollow">A Complete Guide to the Model Context Protocol (MCP) in 2025</a></li>
<li class="break-words"><a href="https://www.linkedin.com/pulse/top-mcp-model-context-protocol-servers-try-2025-excellent-web-world-wpxec" target="_blank" rel="noopener noreferrer nofollow">Top MCP (Model Context Protocol) Servers to Try in 2025</a></li>
<li class="break-words"><a href="https://en.wikipedia.org/wiki/Model_Context_Protocol" target="_blank" rel="noopener noreferrer nofollow">Model Context Protocol - Wikipedia</a></li>
<li class="break-words"><a href="https://www.ibm.com/think/topics/model-context-protocol" target="_blank" rel="noopener noreferrer nofollow">What is Model Context Protocol (MCP)? | IBM</a></li>
<li class="break-words"><a href="https://www.descope.com/learn/post/mcp" target="_blank" rel="noopener noreferrer nofollow">What Is the Model Context Protocol (MCP) and How It Works</a></li>
<li class="break-words"><a href="https://modelcontextprotocol.io/docs/learn/architecture" target="_blank" rel="noopener noreferrer nofollow">Architecture overview - Model Context Protocol</a></li>
<li class="break-words"><a href="https://github.com/punkpeye/awesome-mcp-servers" target="_blank" rel="noopener noreferrer nofollow">GitHub - punkpeye/awesome-mcp-servers: A collection of MCP servers.</a></li>
<li class="break-words"><a href="https://blog.fka.dev/blog/2025-06-11-diving-into-mcp-advanced-server-capabilities/" target="_blank" rel="noopener noreferrer nofollow">Diving into MCP Advanced Server Capabilities: A Comprehensive Guide</a></li>
<li class="break-words"><a href="https://modelcontextprotocol.io/specification/draft/basic/" target="_blank" rel="noopener noreferrer nofollow">Overview - Model Context Protocol</a></li>
</ul></div><section class="inline-media-container flex flex-col gap-1 clear-both"></section><section class="auth-notification flex flex-col gap-1"></section><div class="flex gap-2 mt-1 print:hidden"><div class="search-results flex -ml-1 text-sm gap-2 mb-1"><div class="flex flex-row items-center pe-3 ps-0.5 h-8 gap-1 rounded-full cursor-pointer bg-foreground border border-card-border hover:bg-card-hover hover:border-card-border-focus"><div style="z-index: 3;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 ms-1.5 flex bg-popover overflow-hidden border border-background rounded-full z-3"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=levo.ai&amp;sz=256"></div></div><div style="z-index: 2;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-2 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=modelcontextprotocol.io&amp;sz=256"></div></div><div style="z-index: 1;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-1 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=marktechpost.com&amp;sz=256"></div></div><div class="truncate">24 páginas web</div></div></div></div></div>

---

### Usuário

continue to next steps please... keep up expanding much more aspects and any thecnical perpectives around this!

---

### Grok AI

<div class="relative"><div class="thinking-container mb-3"><div class="think-box relative mb-2 @md/mainview:-mx-4 prose-p:!my-0 prose-li:!m-0"><div class="z-10 w-full" style="height: auto; position: relative;"><div class="flex flex-row items-center gap-1 flex-shrink-0 h-7 cursor-pointer mt-3 mb-1 sm:mx-3 w-[calc(100%-40px)]"><div class="w-[24px] h-[24px] flex items-center justify-center relative group"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="stroke-[2] -mt-[1px] text-secondary group-hover:opacity-0 transition-opacity"><path d="M19 9C19 12.866 15.866 17 12 17C8.13398 17 4.99997 12.866 4.99997 9C4.99997 5.13401 8.13398 3 12 3C15.866 3 19 5.13401 19 9Z" class="fill-yellow-100 dark:fill-yellow-300 origin-center transition-[transform,opacity] duration-100 scale-0 opacity-0"></path><path d="M15 16.1378L14.487 15.2794L14 15.5705V16.1378H15ZM8.99997 16.1378H9.99997V15.5705L9.51293 15.2794L8.99997 16.1378ZM18 9C18 11.4496 16.5421 14.0513 14.487 15.2794L15.5129 16.9963C18.1877 15.3979 20 12.1352 20 9H18ZM12 4C13.7598 4 15.2728 4.48657 16.3238 5.33011C17.3509 6.15455 18 7.36618 18 9H20C20 6.76783 19.082 4.97946 17.5757 3.77039C16.0931 2.58044 14.1061 2 12 2V4ZM5.99997 9C5.99997 7.36618 6.64903 6.15455 7.67617 5.33011C8.72714 4.48657 10.2401 4 12 4V2C9.89382 2 7.90681 2.58044 6.42427 3.77039C4.91791 4.97946 3.99997 6.76783 3.99997 9H5.99997ZM9.51293 15.2794C7.4578 14.0513 5.99997 11.4496 5.99997 9H3.99997C3.99997 12.1352 5.81225 15.3979 8.48701 16.9963L9.51293 15.2794ZM9.99997 19.5001V16.1378H7.99997V19.5001H9.99997ZM10.5 20.0001C10.2238 20.0001 9.99997 19.7763 9.99997 19.5001H7.99997C7.99997 20.8808 9.11926 22.0001 10.5 22.0001V20.0001ZM13.5 20.0001H10.5V22.0001H13.5V20.0001ZM14 19.5001C14 19.7763 13.7761 20.0001 13.5 20.0001V22.0001C14.8807 22.0001 16 20.8808 16 19.5001H14ZM14 16.1378V19.5001H16V16.1378H14Z" fill="currentColor"></path><path d="M9 16.0001H15" stroke="currentColor"></path><path d="M12 16V12" stroke="currentColor" stroke-linecap="square"></path><g><path d="M20 7L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M20 9L19 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 7L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path><path d="M4 9L5 8" stroke="currentColor" stroke-linecap="round" class="transition-[transform,opacity] duration-100 ease-in-out translate-x-0 translate-y-0 opacity-0"></path></g></svg><div class="absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity" style="transform: none;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down text-secondary"><path d="m6 9 6 6 6-6"></path></svg></div></div><div class="flex-1 overflow-hidden text-secondary"><span class="truncate">Pensou por 50s</span></div></div></div></div></div><div class="relative response-content-markdown markdown [&amp;_a:not(.not-prose)]:text-current [&amp;_a:not(.not-prose):hover]:text-primary [&amp;_a:not(.not-prose):hover]:decoration-primary [&amp;_a:not(.not-prose)]:underline [&amp;_a:not(.not-prose)]:decoration-primary/30 [&amp;_a:not(.not-prose)]:underline-offset-2 [&amp;_h2:not(.not-prose):first-child]:mt-0 [&amp;_h3:not(.not-prose):first-child]:mt-0 [&amp;_h4:not(.not-prose):first-child]:mt-0"><p dir="auto" class="break-words" style="white-space: pre-wrap;">Research suggests that the Model Context Protocol (MCP) has continued to mature in 2025, with advancements in registries, integrations, and security features potentially enhancing AI interoperability, though implementation challenges like authentication vulnerabilities remain a topic of discussion. It seems likely that new SDK updates, such as structured outputs and stateless modes, could improve server scalability and developer efficiency, but trade-offs in complexity for multi-modal or agentic applications should be considered. Evidence leans toward the introduction of centralized registries and extended protocols like AP2 fostering broader ecosystem adoption, while acknowledging diverse stakeholder needs for privacy and performance in distributed architectures.<span class="inline-flex flex-row items-center"></span></p>
<h3 dir="auto" class="text-xl">Next Steps in MCP Server Development</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">To advance from basic implementations, focus on integrating recent 2025 features like OAuth 2.1 authentication and stateless transports for production readiness. Explore the new MCP Registry for discovering pre-built servers, which could accelerate prototyping. Experiment with SDK updates in Python or TypeScript to incorporate structured outputs and debouncing for optimized performance.</p>
<h3 dir="auto" class="text-xl">Emerging Technical Perspectives</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Security discussions highlight the importance of secure-by-default designs, as MCP's openness may introduce risks like unauthorized access—consider implementing DNS rebinding protection and token verification. For agentic AI, extensions like AP2 (Agent Payment Protocol) suggest pathways for monetized interactions, potentially combining with MCP for collaborative workflows. Multi-modal capabilities, seen in servers like fal-mcp, point toward handling diverse data types, but ensure compatibility across LLM providers.</p>
<h3 dir="auto" class="text-xl">Integration and Ecosystem Growth</h3>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Leverage integrations with platforms like Microsoft Fabric's Real-Time Intelligence or langchain4j for enhanced tooling. Community-driven servers, such as DefiLlama MCP for blockchain data, illustrate domain-specific applications. Best practices include using knowledge graphs for orchestration in mesh architectures, balancing local and cloud deployments for empathy toward varying user scales.</p>
<hr class="border-border-l2">
<p dir="auto" class="break-words" style="white-space: pre-wrap;">The Model Context Protocol (MCP), launched by Anthropic in late 2024 as an open-source standard, has evolved significantly by September 2025 into a cornerstone for AI interoperability, facilitating secure connections between LLM applications and external systems like databases, APIs, and workflows. Often analogized to "USB-C for AI," MCP addresses the N×M integration challenge by standardizing JSON-RPC 2.0-based communication, enabling AI agents to maintain context across tools without custom code. As of mid-2025, adoption spans major platforms including Microsoft Fabric (with Real-Time Intelligence support), langchain4j (v1.5.0 adding MCP clients), and emerging registries, though security concerns around its non-secure-by-default nature underscore the need for balanced, empathetic implementations that consider risks for developers, enterprises, and end-users.<span class="inline-flex flex-row items-center"></span></p>
<h4 dir="auto" class="">Deeper Protocol Layers and Inner Structures</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">MCP's hierarchical architecture separates transport (outer layer for connectivity) from data/session layers (inner for semantics and state), promoting modularity. The transport layer now prioritizes Streamable HTTP over deprecated SSE, supporting stateless modes for serverless scalability (e.g., AWS Lambda) and resumability via event stores, with heartbeats (15-30s intervals) for failure detection—reducing reconnection overhead by up to 40% in benchmarks. Inner data layer leverages JSON-RPC 2.0 for batched requests/responses/notifications, with methods like <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">initialize</span> negotiating versions (e.g., 2025-06-18) and capabilities (e.g., sampling support declared by clients). Sessions maintain state via unique IDs, incorporating 2025 bi-directional push channels for reactive events (e.g., IoT updates), and error codes for retries with exponential backoff. Capability negotiation ensures extensibility—servers advertise features like prompt management or resource subscriptions, fostering compatibility in hybrid setups.<span class="inline-flex flex-row items-center"></span></p>





























<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="sm">Protocol Layer</th><th class="break-words" data-col-size="lg">Structures and Elements</th><th class="break-words" data-col-size="lg">Handling Mechanisms</th><th class="break-words" data-col-size="xl">2025 Technical Perspectives</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Transport</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Stdio (local), Streamable HTTP (remote, stateless/resumable), Custom (e.g., anyio)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Length-prefixed framing, CORS for browser clients, DNS rebinding protection</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Shift to stateless for edge computing; proxy auth for external OAuth, reducing latency in distributed agents</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Data (JSON-RPC 2.0)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Requests/Responses (ID-correlated), Notifications (e.g., progress)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Batch arrays for parallelism, structured errors (e.g., "auth" codes)</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Annotated schemas for nested objects; debouncing for bulk notifications, optimizing network efficiency by coalescing updates</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Session</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">State IDs, push channels, ephemeral/durable storage (e.g., Redis/PostgreSQL)</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Correlation, cancellation hooks, no-reuse IDs</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Bi-directional events for real-time reactivity; integration with knowledge graphs for persistent agent memory</td></tr></tbody></table></div>
<h4 dir="auto" class="">Advanced Features Engineering and Perspectives</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Features are engineered modularly via SDKs, with 2025 updates emphasizing structured outputs (human-readable + machine-parsable, validated via Pydantic/Zod) for type safety, reducing parsing errors by 25%. Tools support async yields for streaming, approval hooks, and progress notifications (e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">notifications/progress</span> with tokens), ideal for long ops like DB queries. Resources use hierarchical URIs with templates (e.g., "users://{id}"), adding search/chunking and ResourceLinks for memory efficiency in large data scenarios. Prompts incorporate versioning and placeholders (e.g., Jinja2), chaining with tools for meta-flows.<span class="inline-flex flex-row items-center"></span></p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Sampling offloads completions to clients (e.g., <span class="text-sm px-1 rounded-sm !font-mono bg-orange-400/10 text-orange-500 dark:bg-orange-300/10 dark:text-orange-200">sampling/createMessage</span> with maxTokens), saving up to 50% tokens; elicitation requests inputs with validation (e.g., accept/decline). Cancellation uses maps for state tracking, while autocompletions suggest params (e.g., file paths). Logging/auditing integrates with ELK, and icons/metadata enhance UI (title precedence: title → annotations → name). Perspectives: For agentic AI, these enable ReAct loops; multi-modal extensions (e.g., image handling via automatic base64) support cross-domain retrieval, but require careful validation to mitigate injection risks.<span class="inline-flex flex-row items-center"></span></p>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Code for sampling in JS (from advanced guides):</p>
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">javascript</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(86, 156, 214);">async</span><span style="color: rgb(86, 156, 214);"> function</span><span style="color: rgb(220, 220, 170);"> summarizeText</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">text</span><span style="color: rgb(230, 230, 230);">) {</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">  if</span><span style="color: rgb(230, 230, 230);"> (</span><span style="color: rgb(212, 212, 212);">!</span><span style="color: rgb(156, 220, 254);">client</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">capabilities</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">sampling</span><span style="color: rgb(230, 230, 230);">) </span><span style="color: rgb(197, 134, 192);">return</span><span style="color: rgb(206, 145, 120);"> "Summary unavailable"</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">  const</span><span style="color: rgb(156, 220, 254);"> response</span><span style="color: rgb(212, 212, 212);"> =</span><span style="color: rgb(197, 134, 192);"> await</span><span style="color: rgb(156, 220, 254);"> client</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(220, 220, 170);">request</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(206, 145, 120);">"sampling/createMessage"</span><span style="color: rgb(230, 230, 230);">, {</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">    messages:</span><span style="color: rgb(230, 230, 230);"> [{ </span><span style="color: rgb(156, 220, 254);">role:</span><span style="color: rgb(206, 145, 120);"> "user"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">content:</span><span style="color: rgb(230, 230, 230);"> { </span><span style="color: rgb(156, 220, 254);">type:</span><span style="color: rgb(206, 145, 120);"> "text"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">text:</span><span style="color: rgb(206, 145, 120);"> `Summarize: </span><span style="color: rgb(86, 156, 214);">${</span><span style="color: rgb(156, 220, 254);">text</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">`</span><span style="color: rgb(230, 230, 230);"> } }],</span></span>
<span class="line"><span style="color: rgb(156, 220, 254);">    maxTokens:</span><span style="color: rgb(181, 206, 168);"> 150</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">  });</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">  return</span><span style="color: rgb(156, 220, 254);"> response</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">content</span><span style="color: rgb(230, 230, 230);">.</span><span style="color: rgb(156, 220, 254);">text</span><span style="color: rgb(230, 230, 230);">;</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">}</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">In Python, elicitation example:</p>
<div dir="auto" class="not-prose"><div class="relative not-prose @container/code-block [&amp;_div+div]:!mt-0 mt-3 mb-3 @md:-mx-4 @md:-mr-4" data-testid="code-block"><div class="flex flex-row px-4 py-2 h-10 items-center rounded-t-xl bg-surface-l2 border border-border-l1"><span class="font-mono text-xs">python</span></div><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 @[1280px]/mainview:top-10 top-24 @[0px]/preview:top-5 print:hidden"><div class="absolute bottom-1 right-1 flex flex-row gap-0.5"><div class="flex flex-row gap-0.5" style="opacity: 1;"></div></div></div><div class="shiki not-prose relative [&amp;_pre]:overflow-auto [&amp;_pre]:rounded-b-lg [&amp;_pre]:px-4 [&amp;_pre]:py-4 !p-0 border border-border-l1" style="border-radius: 0px 0px 12px 12px; border-top: none; border-right-color: ; border-right-style: ; border-right-width: ; border-bottom-color: ; border-bottom-style: ; border-bottom-width: ; border-left-color: ; border-left-style: ; border-left-width: ; border-image-source: ; border-image-slice: ; border-image-width: ; border-image-outset: ; border-image-repeat: ; padding: 16px; margin-top: 0px; font-size: 0.9em; font-family: var(--font-ibm-plex-mono); line-height: 1.5em; background: var(--surface-inset); color: var(--fg-primary); display: block; overflow: auto;"><pre class="shiki slack-dark" tabindex="0" style="background-color: rgb(34, 34, 34); color: rgb(230, 230, 230);"><code><span class="line"><span style="color: rgb(220, 220, 170);">@mcp.tool</span><span style="color: rgb(230, 230, 230);">()</span></span>
<span class="line"><span style="color: rgb(86, 156, 214);">async</span><span style="color: rgb(86, 156, 214);"> def</span><span style="color: rgb(220, 220, 170);"> book_table</span><span style="color: rgb(230, 230, 230);">(</span><span style="color: rgb(156, 220, 254);">date</span><span style="color: rgb(230, 230, 230);">: </span><span style="color: rgb(78, 201, 176);">str</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(156, 220, 254);">ctx</span><span style="color: rgb(230, 230, 230);">):</span></span>
<span class="line"><span style="color: rgb(230, 230, 230);">  alternatives </span><span style="color: rgb(212, 212, 212);">=</span><span style="color: rgb(197, 134, 192);"> await</span><span style="color: rgb(230, 230, 230);"> ctx.elicitation.request(</span><span style="color: rgb(206, 145, 120);">"alternative_date"</span><span style="color: rgb(230, 230, 230);">, {</span><span style="color: rgb(206, 145, 120);">"type"</span><span style="color: rgb(230, 230, 230);">: </span><span style="color: rgb(206, 145, 120);">"text"</span><span style="color: rgb(230, 230, 230);">, </span><span style="color: rgb(206, 145, 120);">"prompt"</span><span style="color: rgb(230, 230, 230);">: </span><span style="color: rgb(206, 145, 120);">"Suggest alternative"</span><span style="color: rgb(230, 230, 230);">})</span></span>
<span class="line"><span style="color: rgb(197, 134, 192);">  if</span><span style="color: rgb(230, 230, 230);"> alternatives.action </span><span style="color: rgb(212, 212, 212);">==</span><span style="color: rgb(206, 145, 120);"> "accept"</span><span style="color: rgb(230, 230, 230);">: </span><span style="color: rgb(197, 134, 192);">return</span><span style="color: rgb(86, 156, 214);"> f</span><span style="color: rgb(206, 145, 120);">"Booked on </span><span style="color: rgb(86, 156, 214);">{</span><span style="color: rgb(230, 230, 230);">alternatives.value</span><span style="color: rgb(86, 156, 214);">}</span><span style="color: rgb(206, 145, 120);">"</span></span></code></pre></div><div></div><div class="false flex flex-col gap-2 h-full"></div></div></div>









































<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="sm">Feature</th><th class="break-words" data-col-size="lg">Engineering Techniques</th><th class="break-words" data-col-size="md">Inner Impacts</th><th class="break-words" data-col-size="xl">Technical Perspectives (2025)</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Tools</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Async yields, structured schemas (Pydantic/Zod)</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">State maps for streams/cancellation</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Approval hooks for consent; integration with AP2 for monetized actions</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Resources</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">URI templates, ResourceLinks, chunked streams</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Hierarchical roots with subscriptions</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Multi-modal (images/videos) via base64; vector search for semantic querying</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Prompts</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Placeholders, A/B versioning</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Chaining layers</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Few-shot with completions; extensions for domain-specific workflows</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Sampling</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Client delegation with params (maxTokens)</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Hooks for user approval</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Token-efficient gen; offload to edge for latency reduction</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Elicitation</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Input types (text/select), timeouts</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Validation/resume flows</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Human-in-loop for agents; privacy via ephemeral data</td></tr></tbody></table></div>
<h4 dir="auto" class="">Evolving Architectures and Workflow Perspectives</h4>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">2025 architectures emphasize mesh networks with registries (e.g., GitHub MCP Registry launched Sept 2025) for discovery, enabling dynamic orchestration. Agent OS proxies handle auth/audits in multi-agent setups, chaining servers (e.g., fetch → embed → analyze) via knowledge graphs. Edge gateways enforce RBAC, while hybrid local-remote (stdio to Streamable HTTP) balances dev/prod. Perspectives: For scalability, use K8s with ML-driven balancing; hardware like NVIDIA A100 for embeddings. Domain-specific: DefiLlama MCP for blockchain, screenpipe for semantic screen analysis. Security: OAuth 2.1 with RFC 9728 discovery mitigates exfiltration; best practices include real-time kernels and NUMA optimization.<span class="inline-flex flex-row items-center"></span></p>



































<div dir="auto" class="table-container relative group/table w-fit"><div class="sticky w-full right-2 z-10 @[1280px]/mainview:z-40 top-12 @[1280px]/mainview:top-0 print:hidden"><div class="absolute top-1 right-1 flex flex-row gap-0.5"></div></div><table dir="auto" class="w-fit min-w-content [&amp;&gt;thead&gt;tr&gt;th:last-child]:pr-8" data-wide="false"><thead class="sticky [top:var(--thead-sticky-top)] [&amp;_th]:h-10 [background-color:var(--thead-bg-color)] [box-shadow:0_1px_0_0_var(--thead-border-b-color)] border-b-0"><tr class="border-primary/10"><th class="break-words" data-col-size="sm">Architecture</th><th class="break-words" data-col-size="md">Key Servers/Examples</th><th class="break-words" data-col-size="lg">Engineering Focus</th><th class="break-words" data-col-size="xl">Perspectives and Trade-offs</th></tr></thead><tbody><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Aggregators</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">lunar/mcpx, magg</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Discovery prioritization, LLM orchestration</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Cloud scaling with RBAC; trade-off: Centralization vs. decentralization risks</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Knowledge/Memory</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">Weaviate, ApeRAG</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Vector/graph hybrids, persistent RAG</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Distributed datasets; empathy for privacy in regulated sectors like healthcare</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Multi-Modal</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">fal-mcp, burningion/video-editing</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">API embeddings for gen/editing</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Concurrent media; complexity in cross-modal retrieval, balanced by efficiency gains</td></tr><tr class="border-primary/10"><td class="break-words" data-col-size="sm" style="white-space: pre-wrap;">Mesh/Agent OS</td><td class="break-words" data-col-size="md" style="white-space: pre-wrap;">tigranbs/mcgravity</td><td class="break-words" data-col-size="lg" style="white-space: pre-wrap;">Hubs with graphs, AP2 extensions</td><td class="break-words" data-col-size="xl" style="white-space: pre-wrap;">Reactive pipelines; monetization potential, but security audits essential</td></tr></tbody></table></div>
<p dir="auto" class="break-words" style="white-space: pre-wrap;">Extensions like AP2 (supported by 60+ firms) build on MCP/A2A for payments, suggesting collaborative ecosystems. Future: zk/FHE for privacy, quantum plugins; perspectives include incentive models for agent cooperation, as in gRecall's on-chain performance logging. This holistic view supports empathetic development, acknowledging diverse needs from solo devs to enterprises.<span class="inline-flex flex-row items-center"></span></p>
<h3 dir="auto" class="text-xl">Key Citations</h3>
<ul dir="auto" class="marker:text-secondary">
<li class="break-words"><a href="https://www.dataslayer.ai/es/blog/how-the-model-context-protocol-mcp-is-changing-chatgpt" target="_blank" rel="noopener noreferrer nofollow">How the Model Context Protocol (MCP) Is Changing ChatGPT</a></li>
<li class="break-words"><a href="https://blog.modelcontextprotocol.io/posts/2025-09-08-mcp-registry-preview/" target="_blank" rel="noopener noreferrer nofollow">Introducing the MCP Registry - mcp blog</a></li>
<li class="break-words"><a href="https://gbhackers.com/best-mcp-model-context-protocol-servers/amp/" target="_blank" rel="noopener noreferrer nofollow">Top 10 Best MCP (Model Context Protocol) Servers in 2025</a></li>
<li class="break-words"><a href="https://blog.fabric.microsoft.com/en-US/blog/introducing-mcp-support-for-real-time-intelligence-rti/" target="_blank" rel="noopener noreferrer nofollow">Introducing MCP Support for Real-Time Intelligence (RTI)</a></li>
<li class="break-words"><a href="https://digiday.com/media/wtf-is-model-context-protocol-mcp-and-why-should-publishers-care/" target="_blank" rel="noopener noreferrer nofollow">WTF is Model Context Protocol, and why should publishers care?</a></li>
<li class="break-words"><a href="https://www.descope.com/learn/post/mcp" target="_blank" rel="noopener noreferrer nofollow">What Is the Model Context Protocol (MCP) and How It Works</a></li>
<li class="break-words"><a href="https://www.f22labs.com/blogs/what-is-model-context-protocol-mcp-in-2025/" target="_blank" rel="noopener noreferrer nofollow">What is Model Context Protocol (MCP) in 2025 - F22 Labs</a></li>
<li class="break-words"><a href="https://www.bitdefender.com/en-us/blog/businessinsights/security-risks-agentic-ai-model-context-protocol-mcp-introduction" target="_blank" rel="noopener noreferrer nofollow">Security Risks of Agentic AI: A Model Context Protocol (MCP ...</a></li>
<li class="break-words"><a href="https://semgrep.dev/blog/2025/mcp-model-context-propaganda-what-security-teams-need-to-know-about-the-latest-hyped-up-ai-tech" target="_blank" rel="noopener noreferrer nofollow">MCP: Model, Context… Propaganda? What security teams need to ...</a></li>
<li class="break-words"><a href="https://blog.equinix.com/blog/2025/08/06/what-is-the-model-context-protocol-mcp-how-will-it-enable-the-future-of-agentic-ai/" target="_blank" rel="noopener noreferrer nofollow">What Is the Model Context Protocol (MCP)? How Will it Enable the ...</a></li>
<li class="break-words"><a href="https://github.com/modelcontextprotocol/python-sdk" target="_blank" rel="noopener noreferrer nofollow">GitHub - modelcontextprotocol/python-sdk: The official Python SDK for Model Context Protocol servers and clients</a></li>
<li class="break-words"><a href="https://github.com/modelcontextprotocol/typescript-sdk" target="_blank" rel="noopener noreferrer nofollow">GitHub - modelcontextprotocol/typescript-sdk: The official TypeScript SDK for Model Context Protocol servers and clients</a></li>
<li class="break-words"><a href="https://modelcontextprotocol.io/specification/2025-06-18/architecture" target="_blank" rel="noopener noreferrer nofollow">Architecture - Model Context Protocol</a></li>
<li class="break-words"><a href="https://blog.bytebytego.com/p/ep163-12-mcp-servers-you-can-use" target="_blank" rel="noopener noreferrer nofollow">EP163: 12 MCP Servers You Can Use in 2025</a></li>
<li class="break-words"><a href="https://dev.to/fallon_jimmy/top-10-mcp-servers-for-2025-yes-githubs-included-15jg" target="_blank" rel="noopener noreferrer nofollow">🚀Top 10 MCP Servers for 2025 (Yes, GitHub’s Included!) - DEV Community</a></li>
<li class="break-words"><a href="https://www.anthropic.com/news/model-context-protocol" target="_blank" rel="noopener noreferrer nofollow">Introducing the Model Context Protocol \ Anthropic</a></li>
<li class="break-words"><a href="https://www.datacamp.com/blog/top-mcp-servers-and-clients" target="_blank" rel="noopener noreferrer nofollow">Top 10 MCP Servers &amp; Clients for AI Workflow Automation in 2025 | DataCamp</a></li>
<li class="break-words"><a href="https://www.marktechpost.com/2025/07/23/7-mcp-server-best-practices-for-scalable-ai-integrations-in-2025/" target="_blank" rel="noopener noreferrer nofollow">7 MCP Server Best Practices for Scalable AI Integrations in 2025 - MarkTechPost</a></li>
<li class="break-words"><a href="https://securityboulevard.com/2025/09/20-best-mcp-servers-for-developers-in-2025/" target="_blank" rel="noopener noreferrer nofollow">20 Best MCP Servers for Developers in 2025 - Security Boulevard</a></li>
<li class="break-words"><a href="https://www.rapidinnovation.io/post/top-rated-mcp-servers-of-2025-the-ultimate-list" target="_blank" rel="noopener noreferrer nofollow">Top-Rated MCP Servers of 2025 | Model Context Protocol Solutions</a></li>
<li class="break-words"><a href="https://www.appypieautomate.ai/blog/best-mcp-servers" target="_blank" rel="noopener noreferrer nofollow">7 Best MCP Servers in 2025</a></li>
<li class="break-words"><a href="https://medium.com/%40tam.tamanna18/a-comprehensive-guide-to-the-best-mcp-servers-for-2025-5ee541b2b00f" target="_blank" rel="noopener noreferrer nofollow">A Comprehensive Guide to the Best MCP Servers for 2025 | by Tamanna | Medium</a></li>
</ul></div><section class="inline-media-container flex flex-col gap-1 clear-both"></section><section class="auth-notification flex flex-col gap-1"></section><div class="flex gap-2 mt-1 print:hidden"><div class="search-results flex -ml-1 text-sm gap-2 mb-1"><div class="flex flex-row items-center pr-4 py-1 rounded-full cursor-pointer bg-foreground border border-card-border hover:bg-card-hover hover:border-card-border-focus"><div style="z-index: 3;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 ms-1.5 flex bg-popover border border-background z-3"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1885938876151480321/KMW9JJNg_normal.jpg"></div></div><div style="z-index: 2;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 flex bg-popover border border-background z-2 -ms-2"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1907088798913323008/jeWMsq38_normal.png"></div></div><div style="z-index: 1;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 rounded-md opacity-100 flex bg-popover border border-background z-1 -ms-2"><img class="size-[18px] m-0 rounded-full" alt="" src="https://pbs.twimg.com/profile_images/1878391209627955200/HJKSF3gz_normal.jpg"></div></div><div class="truncate">17 posts do 𝕏</div></div><div class="flex flex-row items-center pe-3 ps-0.5 h-8 gap-1 rounded-full cursor-pointer bg-foreground border border-card-border hover:bg-card-hover hover:border-card-border-focus"><div style="z-index: 3;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 ms-1.5 flex bg-popover overflow-hidden border border-background rounded-full z-3"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=dataslayer.ai&amp;sz=256"></div></div><div style="z-index: 2;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-2 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=blog.modelcontextprotocol.io&amp;sz=256"></div></div><div style="z-index: 1;"><div class="no-copy align-text-bottom items-center justify-center select-none transition my-0 opacity-100 flex bg-popover overflow-hidden border border-background rounded-full z-1 -ms-2.5"><img class="size-[16px] m-0 rounded-full" alt="" src="https://www.google.com/s2/favicons?domain=gbhackers.com&amp;sz=256"></div></div><div class="truncate">23 páginas web</div></div></div></div></div>

