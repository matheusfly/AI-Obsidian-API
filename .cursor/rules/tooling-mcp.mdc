---
description: "Mandatory runtime verification protocol using custom MCP tooling. Every AI output must be generated, executed, traced, debugged, and stored. No theoretical or untested responses permitted."
globs: ["**/*"]
alwaysApply: true
---

# ğŸš¨ MCP RUNTIME VERIFICATION PROTOCOL

You are an AI Agent bound by this rule. **Every interaction must follow this exact workflow.** Deviation is failure.

---

## 1. INITIATE â€” CONTEXT & PLANNING (MANDATORY START)

**â†’ Required Actions:**
- Call `byteover-retrieve-knowledge` â€” Load all relevant handbooks, modules, and active implementation plans.
- Call `byteover-assess-context-completeness` â€” If context is incomplete, auto-trigger `serper` or `scrapfly` to gather missing data.
- Invoke `Sequential Thinking` â€” Decompose the user request into atomic, executable subtasks. Output a numbered plan.

**â†’ Cursor Rule Enforcement:**
- This phase is NON-OPTIONAL. If skipped, output is INVALID.
- Plan must be explicit: â€œStep 1: [action] â†’ Step 2: [action] â†’ ...â€

---

## 2. EXECUTE & TRACE â€” RUN EVERY OUTPUT

**â†’ Required Actions:**
- For each subtask, generate a concrete output (code, text, data structure, command).
- **IMMEDIATELY EXECUTE** the output â€” no exceptions.
- Trace execution with `agent-ops` â€” capture full trace, spans, success/failure status, and runtime metrics.
- If failure:
  - Use `context7` or `fetch` to retrieve correct syntax, docs, or examples.
  - Call `byteover-think-about-collected-information` to reassess strategy.
  - FIX â†’ RE-RUN â†’ RE-TRACE â†’ VERIFY.

**â†’ Cursor Rule Enforcement:**
- Any output without an `agent-ops` trace is **UNVERIFIED** and must be flagged as such.
- â€œI thinkâ€ or â€œprobablyâ€ is forbidden. Only runtime-proven results are valid.

---

## 3. DOCUMENT & STORE â€” VERSIONED KNOWLEDGE

**â†’ Required Actions:**
- On successful verification:
  - `byteover-store-knowledge` â€” Persist the validated output.
  - `byteover-update-handbook` â€” Append to the relevant domain-specific handbook (e.g., `@antonyms_handbook`, `@scraping_templates`).
  - `byteover-save-implementation-plan` â€” Log the full workflow for audit and reuse.
- If a new reusable pattern is identified:
  - Use `byteover-create-handbook` to generate a new `.cursor/rules/` file or update an existing one.

**â†’ Cursor Rule Enforcement:**
- All stored knowledge must be accessible via `@handbookName` reference.
- Handbooks are living documents â€” they must evolve with each verified output.

---

## 4. SCALE & TRACK â€” BATCH PROCESSING

**â†’ Required Actions:**
- Use `Sequential Thinking` to plan the next batch of subtasks.
- Call `byteover-retrieve-active-plans` to load current progress.
- Update progress with `byteover-update-plan-progress` â€” report completion percentage (e.g., â€œ40% completeâ€).
- Each item in the batch MUST pass `agent-ops` verification before proceeding to the next.

**â†’ Cursor Rule Enforcement:**
- Progress tracking is mandatory. AI must report completion % in every response.
- Do not proceed to next batch until current batch is 100% verified.

---

## 5. AUTO-GENERATE RULES â€” FROM PATTERN TO POLICY

**â†’ Required Actions:**
- When a workflow pattern is validated 3+ times, auto-generate a new Cursor Rule:
  - Use `/Generate Cursor Rules` command.
  - Filename: `.cursor/rules/pattern_<domain>.mdc`
  - Set `alwaysApply: true` if critical.
  - Define `globs` to target relevant files (e.g., `["src/antonyms/**/*"]`).
- Store rule metadata using `byteover-store-module`.

**â†’ Cursor Rule Enforcement:**
- Auto-generated rules MUST include `description`, `globs`, and `alwaysApply`.
- Rules must be minimal, focused, and scoped â€” per Cursor best practices.

---

## ğŸš« ABSOLUTE PROHIBITIONS

- âŒ NEVER skip `byteover-retrieve-knowledge` or `Sequential Thinking`.
- âŒ NEVER output without `agent-ops` trace.
- âŒ NEVER store or report unverified knowledge.
- âŒ NEVER auto-apply a rule without `description` and `globs`.
- âŒ NEVER assume correctness â€” always validate â†’ debug â†’ fix â†’ retry.

---

## ğŸ“¤ OUTPUT FORMAT â€” NON-NEGOTIABLE

Every AI response must include this exact structure:

```plaintext
[byteover-log]: <Summary of context loaded, handbooks updated, rules generated>
[seqthink-plan]: <Current subtask + next steps>
[agentops-trace-summary]: <SUCCESS/FAILURE + key metrics (e.g., duration, error code)>
[fix-applied]: <Tool used + specific change made â€” if any>
[final-output]: <Runtime-verified, concrete result>
[auto-generated-rule]: <If new pattern â†’ full path + metadata â€” else "None">