<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Playground - Interactive UI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .panel {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
        }

        .panel:hover {
            transform: translateY(-5px);
        }

        .panel h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .example-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .example-card:hover {
            border-color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .example-card.running {
            border-color: #28a745;
            background: #d4edda;
        }

        .example-card.error {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .example-card h3 {
            color: #495057;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .example-card p {
            color: #6c757d;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .status-indicator {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #6c757d;
        }

        .status-indicator.running {
            background: #28a745;
            animation: pulse 1s infinite;
        }

        .status-indicator.error {
            background: #dc3545;
        }

        .status-indicator.success {
            background: #17a2b8;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .output-panel {
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 10px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border-left: 4px solid #667eea;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .metric-label {
            color: #6c757d;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid;
        }

        .alert-info {
            background: #d1ecf1;
            border-color: #17a2b8;
            color: #0c5460;
        }

        .alert-success {
            background: #d4edda;
            border-color: #28a745;
            color: #155724;
        }

        .alert-warning {
            background: #fff3cd;
            border-color: #ffc107;
            color: #856404;
        }

        .alert-danger {
            background: #f8d7da;
            border-color: #dc3545;
            color: #721c24;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .example-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ MCP Playground</h1>
            <p>Interactive Visual Programming with Sentry Monitoring</p>
        </div>

        <div class="alert alert-info">
            <strong>üéØ Welcome!</strong> This is the interactive UI for the MCP Playground. 
            Click on any example below to run it with real-time Sentry monitoring.
        </div>

        <div class="dashboard">
            <div class="panel">
                <h2>üéÆ Available Examples</h2>
                <div class="example-grid" id="examplesGrid">
                    <!-- Examples will be populated by JavaScript -->
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" onclick="runAllExamples()">üöÄ Run All Examples</button>
                    <button class="btn btn-success" onclick="clearOutput()">üßπ Clear Output</button>
                    <button class="btn btn-warning" onclick="showMetrics()">üìä Show Metrics</button>
                    <button class="btn btn-danger" onclick="stopAll()">‚èπÔ∏è Stop All</button>
                </div>
            </div>

            <div class="panel">
                <h2>üìä Real-time Output</h2>
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Running example...</p>
                </div>
                <div class="output-panel" id="output">
                    <div style="color: #28a745;">üéâ MCP Playground Interactive UI Ready!</div>
                    <div style="color: #6c757d; margin-top: 10px;">Click on any example above to get started...</div>
                </div>
            </div>
        </div>

        <div class="panel">
            <h2>üìà Performance Metrics</h2>
            <div class="metrics" id="metrics">
                <div class="metric-card">
                    <div class="metric-value" id="totalExamples">0</div>
                    <div class="metric-label">Examples Run</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="successRate">0%</div>
                    <div class="metric-label">Success Rate</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="totalEvents">0</div>
                    <div class="metric-label">Events Captured</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="avgDuration">0ms</div>
                    <div class="metric-label">Avg Duration</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // MCP Examples Configuration
        const examples = {
            'hello-world': {
                name: 'Hello World MCP',
                description: 'Basic MCP example with Sentry monitoring',
                inputs: { message: 'Hello MCP World!' },
                duration: 1000
            },
            'ai-agent': {
                name: 'AI Agent MCP',
                description: 'AI agent simulation with MCP monitoring',
                inputs: { message: 'Explain MCP and Sentry integration' },
                duration: 1500
            },
            'data-pipeline': {
                name: 'Data Pipeline MCP',
                description: 'Data processing pipeline with MCP monitoring',
                inputs: {},
                duration: 2000
            },
            'web-scraper': {
                name: 'Web Scraper MCP',
                description: 'Web scraping simulation with MCP monitoring',
                inputs: { url: 'https://flyde.dev' },
                duration: 2500
            }
        };

        // State management
        let runningExamples = new Set();
        let metrics = {
            totalExamples: 0,
            successful: 0,
            failed: 0,
            totalEvents: 0,
            totalDuration: 0
        };

        // Initialize the UI
        function initUI() {
            const examplesGrid = document.getElementById('examplesGrid');
            
            Object.entries(examples).forEach(([key, example]) => {
                const card = document.createElement('div');
                card.className = 'example-card';
                card.id = `example-${key}`;
                card.onclick = () => runExample(key);
                
                card.innerHTML = `
                    <div class="status-indicator" id="status-${key}"></div>
                    <h3>${example.name}</h3>
                    <p>${example.description}</p>
                `;
                
                examplesGrid.appendChild(card);
            });
        }

        // Run a single example
        async function runExample(exampleKey) {
            if (runningExamples.has(exampleKey)) {
                return;
            }

            const example = examples[exampleKey];
            const card = document.getElementById(`example-${exampleKey}`);
            const status = document.getElementById(`status-${exampleKey}`);
            
            // Update UI state
            runningExamples.add(exampleKey);
            card.classList.add('running');
            status.classList.add('running');
            
            // Show loading
            showLoading();
            
            // Log start
            logOutput(`üöÄ Starting: ${example.name}`);
            logOutput(`üìù Description: ${example.description}`);
            logOutput(`üì• Inputs: ${JSON.stringify(example.inputs, null, 2)}`);
            logOutput('‚îÄ'.repeat(50));

            try {
                // Simulate MCP operation with Sentry monitoring
                const startTime = Date.now();
                
                // Simulate processing time
                await new Promise(resolve => setTimeout(resolve, example.duration));
                
                const endTime = Date.now();
                const duration = endTime - startTime;
                
                // Generate mock result
                const result = generateMockResult(exampleKey, example, duration);
                
                // Log success
                logOutput('‚úÖ Example completed successfully!');
                logOutput(`‚è±Ô∏è Processing Time: ${duration}ms`);
                logOutput('üì§ Output:');
                logOutput(JSON.stringify(result, null, 2));
                
                // Update metrics
                updateMetrics(true, duration);
                
                // Update UI
                card.classList.remove('running');
                card.classList.add('success');
                status.classList.remove('running');
                status.classList.add('success');
                
            } catch (error) {
                // Log error
                logOutput('‚ùå Error running example: ' + error.message);
                
                // Update metrics
                updateMetrics(false, 0);
                
                // Update UI
                card.classList.remove('running');
                card.classList.add('error');
                status.classList.remove('running');
                status.classList.add('error');
            } finally {
                runningExamples.delete(exampleKey);
                hideLoading();
            }
        }

        // Generate mock results for demonstration
        function generateMockResult(exampleKey, example, duration) {
            const baseResult = {
                timestamp: new Date().toISOString(),
                duration: duration,
                sentryEventId: `event_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`
            };

            switch (exampleKey) {
                case 'hello-world':
                    return {
                        ...baseResult,
                        input: example.inputs.message,
                        output: example.inputs.message + ' Welcome to MCP-powered visual programming!',
                        processed: true
                    };
                
                case 'ai-agent':
                    const responses = [
                        'MCP (Model Context Protocol) enables powerful integrations for AI systems.',
                        'Visual programming with MCP creates intuitive workflows for complex tasks.',
                        'Sentry monitoring ensures robust error tracking and performance analysis.',
                        'The combination of MCP + Sentry + Visual flows creates powerful AI agents.'
                    ];
                    return {
                        ...baseResult,
                        prompt: example.inputs.message,
                        response: responses[Math.floor(Math.random() * responses.length)],
                        model: 'MCP-AI-Agent-v1.0',
                        processingTime: duration
                    };
                
                case 'data-pipeline':
                    return {
                        ...baseResult,
                        totalRecords: 100,
                        categories: {
                            A: Math.floor(Math.random() * 40) + 20,
                            B: Math.floor(Math.random() * 40) + 20,
                            C: Math.floor(Math.random() * 40) + 20
                        },
                        averageValue: Math.random() * 100,
                        maxValue: Math.random() * 100,
                        minValue: Math.random() * 10,
                        processedAt: new Date().toISOString()
                    };
                
                case 'web-scraper':
                    return {
                        ...baseResult,
                        url: example.inputs.url,
                        title: 'Example Domain - MCP Scraped',
                        description: 'This domain is for use in illustrative examples.',
                        links: [
                            'https://example.com/about',
                            'https://example.com/contact',
                            'https://example.com/services'
                        ],
                        scrapedAt: new Date().toISOString(),
                        status: 'success'
                    };
                
                default:
                    return baseResult;
            }
        }

        // Run all examples
        async function runAllExamples() {
            logOutput('üîÑ Running all MCP examples...\n');
            
            for (const exampleKey of Object.keys(examples)) {
                await runExample(exampleKey);
                await new Promise(resolve => setTimeout(resolve, 500)); // Small delay between examples
            }
            
            logOutput('\nüéâ All examples completed!');
            showMetrics();
        }

        // Clear output
        function clearOutput() {
            document.getElementById('output').innerHTML = '<div style="color: #28a745;">üéâ Output cleared! Ready for new operations...</div>';
        }

        // Show metrics
        function showMetrics() {
            logOutput('\nüìä CURRENT METRICS');
            logOutput('==================');
            logOutput(`Total Examples: ${metrics.totalExamples}`);
            logOutput(`Successful: ${metrics.successful}`);
            logOutput(`Failed: ${metrics.failed}`);
            logOutput(`Success Rate: ${metrics.totalExamples > 0 ? Math.round((metrics.successful / metrics.totalExamples) * 100) : 0}%`);
            logOutput(`Total Events: ${metrics.totalEvents}`);
            logOutput(`Average Duration: ${metrics.totalExamples > 0 ? Math.round(metrics.totalDuration / metrics.totalExamples) : 0}ms`);
            logOutput('==================\n');
        }

        // Stop all running examples
        function stopAll() {
            runningExamples.clear();
            
            // Reset all cards
            document.querySelectorAll('.example-card').forEach(card => {
                card.classList.remove('running', 'success', 'error');
            });
            
            document.querySelectorAll('.status-indicator').forEach(status => {
                status.classList.remove('running', 'success', 'error');
            });
            
            hideLoading();
            logOutput('‚èπÔ∏è All operations stopped.');
        }

        // Log output
        function logOutput(message) {
            const output = document.getElementById('output');
            const timestamp = new Date().toLocaleTimeString();
            output.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }

        // Show/hide loading
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
        }

        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }

        // Update metrics
        function updateMetrics(success, duration) {
            metrics.totalExamples++;
            if (success) {
                metrics.successful++;
            } else {
                metrics.failed++;
            }
            metrics.totalEvents += 2; // Info + Performance events
            metrics.totalDuration += duration;
            
            // Update UI
            document.getElementById('totalExamples').textContent = metrics.totalExamples;
            document.getElementById('successRate').textContent = 
                metrics.totalExamples > 0 ? Math.round((metrics.successful / metrics.totalExamples) * 100) + '%' : '0%';
            document.getElementById('totalEvents').textContent = metrics.totalEvents;
            document.getElementById('avgDuration').textContent = 
                metrics.totalExamples > 0 ? Math.round(metrics.totalDuration / metrics.totalExamples) + 'ms' : '0ms';
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initUI);
    </script>
</body>
</html>